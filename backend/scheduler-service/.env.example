# 调度服务环境变量配置 (Python)

# 运行环境
ENVIRONMENT=development
PORT=30004

# 数据库配置
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=cloudphone

# Redis 配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# RabbitMQ 配置
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=admin
RABBITMQ_PASSWORD=admin
RABBITMQ_VHOST=/

# Celery 配置
CELERY_BROKER_URL=amqp://admin:admin@localhost:5672/
CELERY_RESULT_BACKEND=redis://localhost:6379/0
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_TIMEZONE=Asia/Shanghai

# 调度策略配置
SCHEDULING_ALGORITHM=weighted_round_robin  # round_robin | least_connection | weighted_round_robin
LOAD_BALANCE_ENABLED=true
MAX_DEVICES_PER_NODE=100

# 资源监控配置
RESOURCE_CHECK_INTERVAL=30  # seconds
CPU_THRESHOLD=80  # percent
MEMORY_THRESHOLD=85  # percent
DISK_THRESHOLD=90  # percent

# 自动扩缩容配置
AUTO_SCALING_ENABLED=true
SCALE_UP_THRESHOLD=80  # percent
SCALE_DOWN_THRESHOLD=30  # percent
SCALE_COOLDOWN=300  # seconds

# 设备健康检查
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=60  # seconds
UNHEALTHY_THRESHOLD=3  # 连续失败次数

# 任务队列配置
MAX_QUEUE_SIZE=1000
TASK_TIMEOUT=600  # seconds
MAX_RETRY_ATTEMPTS=3

# 设备服务地址
DEVICE_SERVICE_URL=http://localhost:30002

# 日志配置
LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR
LOG_FORMAT=json  # json | text
LOG_FILE=/var/log/scheduler-service.log

# 监控指标
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9091
