# ========================================
# 代理服务配置示例
# ========================================
#
# 用于 app-service 集成代理功能
# 复制此文件为 .env，并根据实际情况修改配置

# ========== 代理服务配置 ==========

# 代理服务 URL
PROXY_SERVICE_URL=http://localhost:30007

# 是否启用代理（true/false）
# true: 外部 APK 下载和第三方 API 将通过代理访问
# false: 直接访问外部资源（可能触发 IP 封禁）
PROXY_ENABLED=true

# 代理请求超时时间（毫秒）
# 大文件下载建议设置较长时间
PROXY_TIMEOUT=300000

# 代理请求最大重试次数
PROXY_MAX_RETRIES=2

# 是否启用熔断器（true/false）
# 当代理服务不可用时自动降级到直接访问
PROXY_CIRCUIT_BREAKER=true

# ========== MinIO 配置 ==========

# MinIO 服务地址
MINIO_ENDPOINT=localhost
MINIO_PORT=9000

# MinIO 凭证
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin

# 是否使用 SSL
MINIO_USE_SSL=false

# 默认存储桶名称
MINIO_BUCKET_NAME=cloudphone-apps

# ========== 设备服务配置 ==========

# 设备服务 URL（用于 ADB 安装）
DEVICE_SERVICE_URL=http://localhost:30002

# ========================================
# 使用说明
# ========================================
#
# 1. 外部 APK 下载代理使用：
#    - 设置 PROXY_ENABLED=true
#    - downloadExternalApk() 方法将自动通过代理下载
#    - 绕过 IP 封禁和地域限制
#
# 2. 使用场景：
#    - 从第三方应用市场下载 APK（如 Google Play、APKPure）
#    - 从外部 CDN 下载大文件
#    - 访问受地域限制的资源
#
# 3. 代理池监控：
#    - 查看代理池统计: http://localhost:30007/proxy/pool/stats
#    - 查看使用统计: http://localhost:30007/proxy/usage/stats
#
# 4. 性能优化：
#    - 代理增加 ~100-500ms 延迟（取决于文件大小）
#    - 使用高质量代理 (minQuality: 75+) 可减少延迟
#    - 大文件下载建议增加 timeout
#
# 5. 成本估算：
#    - IPRoyal: $1.75/GB
#    - 100MB APK 下载: ~$0.18
#    - 200MB APK 下载: ~$0.35
#
# ========================================
