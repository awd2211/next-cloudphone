# 流媒体服务环境变量配置 (Go)

# 运行环境
ENVIRONMENT=development
PORT=3004

# Redis 配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# WebRTC 配置
WEBRTC_ENABLED=true
STUN_SERVER=stun:stun.l.google.com:19302
TURN_SERVER=
TURN_USERNAME=
TURN_CREDENTIAL=

# ICE 配置
ICE_LITE_ENABLED=false
ICE_TCP_ENABLED=true
ICE_UDP_ENABLED=true
ICE_PORT_MIN=10000
ICE_PORT_MAX=20000

# 视频编码配置
VIDEO_CODEC=H264  # H264 | VP8 | VP9
VIDEO_BITRATE=2000000  # 2Mbps
VIDEO_FPS=30
VIDEO_WIDTH=1280
VIDEO_HEIGHT=720

# 音频编码配置
AUDIO_CODEC=OPUS
AUDIO_BITRATE=128000  # 128kbps
AUDIO_SAMPLE_RATE=48000
AUDIO_CHANNELS=2

# HLS 配置 (可选)
HLS_ENABLED=false
HLS_SEGMENT_DURATION=6  # seconds
HLS_PLAYLIST_LENGTH=5  # segments
HLS_OUTPUT_DIR=/tmp/hls

# WebSocket 配置
WS_READ_BUFFER_SIZE=4096
WS_WRITE_BUFFER_SIZE=4096
WS_PING_INTERVAL=30  # seconds
WS_PONG_TIMEOUT=10  # seconds

# 连接管理
MAX_CONNECTIONS=1000
CONNECTION_TIMEOUT=300  # seconds
IDLE_TIMEOUT=600  # seconds

# 带宽限制
ENABLE_BANDWIDTH_LIMIT=true
MAX_BANDWIDTH_PER_CONNECTION=5000000  # 5Mbps

# 录制配置 (可选)
ENABLE_RECORDING=false
RECORDING_OUTPUT_DIR=/var/recordings
RECORDING_FORMAT=mp4
RECORDING_QUALITY=high  # low | medium | high

# 性能配置
GO_MAX_PROCS=0  # 0 = use all CPUs
GOMEMLIMIT=4GiB

# 日志配置
LOG_LEVEL=INFO  # DEBUG | INFO | WARN | ERROR
LOG_FORMAT=json  # json | text
LOG_FILE=/var/log/media-service.log

# 监控配置
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9092

# 设备服务地址
DEVICE_SERVICE_URL=http://localhost:3002
