# 计费服务环境变量配置

# 运行环境
NODE_ENV=development
PORT=3006

# 数据库配置
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=postgres
DB_DATABASE=cloudphone

# Redis 配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# RabbitMQ 配置
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USERNAME=admin
RABBITMQ_PASSWORD=admin
RABBITMQ_VHOST=/

# 计费配置
BILLING_CURRENCY=CNY
BILLING_CYCLE=hourly  # hourly | daily | monthly
PRICE_PER_HOUR=1.0
PRICE_PER_GB_STORAGE=0.1
PRICE_PER_GB_TRAFFIC=0.5

# 套餐配置
ENABLE_PACKAGE_PLANS=true
FREE_TRIAL_DURATION=72  # hours
FREE_TRIAL_CREDITS=100  # CNY

# 订单配置
ORDER_TIMEOUT=1800  # 30 minutes in seconds
ORDER_AUTO_CANCEL=true
INVOICE_GENERATION=true

# 支付配置 (集成第三方支付)
# 微信支付
WECHAT_PAY_ENABLED=false
WECHAT_APP_ID=
WECHAT_MCH_ID=
WECHAT_API_KEY=
WECHAT_CERT_PATH=

# 支付宝
ALIPAY_ENABLED=false
ALIPAY_APP_ID=
ALIPAY_PRIVATE_KEY=
ALIPAY_PUBLIC_KEY=
ALIPAY_GATEWAY=https://openapi.alipay.com/gateway.do

# Stripe (国际支付)
STRIPE_ENABLED=false
STRIPE_PUBLIC_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# 账单配置
INVOICE_EMAIL_ENABLED=true
INVOICE_AUTO_SEND=true
INVOICE_GENERATION_DAY=1  # 每月1号生成账单

# 欠费处理
ENABLE_OVERDUE_CHECK=true
OVERDUE_GRACE_PERIOD=3  # days
OVERDUE_SUSPEND_DEVICES=true

# 设备服务地址
DEVICE_SERVICE_URL=http://localhost:3002

# 用户服务地址
USER_SERVICE_URL=http://localhost:3001

# 日志配置
LOG_LEVEL=debug
LOG_FORMAT=dev
