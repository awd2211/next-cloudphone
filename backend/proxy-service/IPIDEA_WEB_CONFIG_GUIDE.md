# IPIDEA Web é…ç½®å®Œæ•´æŒ‡å—

æœ¬æŒ‡å—å°†å¸®åŠ©ä½ å®Œå…¨é€šè¿‡ Web ç®¡ç†åå°é…ç½® IPIDEA ä»£ç†ä¾›åº”å•†ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ä»»ä½•é…ç½®æ–‡ä»¶ã€‚

## ğŸ¯ åŠŸèƒ½æ¦‚è§ˆ

é€šè¿‡ Web ç•Œé¢ï¼Œä½ å¯ä»¥ï¼š

1. âœ… **æ·»åŠ /ç¼–è¾‘ IPIDEA é…ç½®** - å®Œå…¨åœ¨çº¿é…ç½®
2. âœ… **æµ‹è¯•è¿æ¥** - éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®
3. âœ… **ç®¡ç†ç™½åå•** - æ·»åŠ /åˆ é™¤æœåŠ¡å™¨IP
4. âœ… **ç›‘æ§æµé‡** - å®æ—¶æŸ¥çœ‹å‰©ä½™æµé‡
5. âœ… **è®¾ç½®é¢„è­¦** - æµé‡ä¸è¶³è‡ªåŠ¨å‘Šè­¦
6. âœ… **ç®¡ç†è´¦æˆ·** - æŸ¥çœ‹æ‰€æœ‰è®¤è¯è´¦æˆ·
7. âœ… **æŸ¥çœ‹åŒºåŸŸ** - äº†è§£æ”¯æŒçš„å›½å®¶/åœ°åŒº

---

## ğŸ“ æ­¥éª¤ 1: è·å– IPIDEA é…ç½®ä¿¡æ¯

åœ¨é…ç½®ä¹‹å‰ï¼Œä½ éœ€è¦ä» IPIDEA æ§åˆ¶å°è·å–ä»¥ä¸‹ä¿¡æ¯ï¼š

### 1.1 ç™»å½• IPIDEA æ§åˆ¶å°
è®¿é—®: https://www.ipidea.net/ucenter/

### 1.2 è·å–å¿…éœ€ä¿¡æ¯

**â‘  AppKey (API å¯†é’¥)**
- ä½ç½®: æ§åˆ¶å° â†’ API ç®¡ç† â†’ AppKey
- ç¤ºä¾‹: `abc123def456ghi789`
- ç”¨é€”: è°ƒç”¨ IPIDEA API è¿›è¡Œæµé‡æŸ¥è¯¢ã€ç™½åå•ç®¡ç†ç­‰

**â‘¡ ä»£ç†è®¤è¯ç”¨æˆ·å**
- ä½ç½®: æ§åˆ¶å° â†’ ä»£ç†ç®¡ç† â†’ è®¤è¯è´¦æˆ·
- ç¤ºä¾‹: `user123456`
- ç”¨é€”: ä½¿ç”¨ä»£ç†æ—¶çš„è®¤è¯ç”¨æˆ·å

**â‘¢ ä»£ç†è®¤è¯å¯†ç **
- ä½ç½®: æ§åˆ¶å° â†’ ä»£ç†ç®¡ç† â†’ è®¤è¯è´¦æˆ·
- ç¤ºä¾‹: `pass123456`
- ç”¨é€”: ä½¿ç”¨ä»£ç†æ—¶çš„è®¤è¯å¯†ç 

**â‘£ ä¸“å±ç½‘å…³åœ°å€**
- ä½ç½®: æ§åˆ¶å° â†’ ä»£ç†ç®¡ç† â†’ éš§é“ä»£ç†
- æ ¼å¼: `{hash}.lqz.na.ipidea.online`
- ç¤ºä¾‹: `e255c08e04856698.lqz.na.ipidea.online`
- ç”¨é€”: ä»£ç†è¿æ¥çš„ç½‘å…³åœ°å€

**â‘¤ ç«¯å£**
- æ–°ç‰ˆç«¯å£: `2336`
- æ—§ç‰ˆç«¯å£: `2333`
- æ¨èä½¿ç”¨: `2336`

---

## ğŸ–¥ï¸ æ­¥éª¤ 2: é€šè¿‡ Web ç•Œé¢æ·»åŠ  IPIDEA

### 2.1 è®¿é—®ä»£ç†æä¾›å•†ç®¡ç†é¡µé¢

```
http://localhost:5173/proxy/providers
```

### 2.2 ç‚¹å‡» "æ·»åŠ æä¾›å•†" æŒ‰é’®

### 2.3 å¡«å†™è¡¨å•

**åŸºç¡€ä¿¡æ¯ï¼š**

| å­—æ®µ | å€¼ | è¯´æ˜ |
|------|-----|------|
| æä¾›å•†åç§° | `IPIDEA ä¸»è´¦æˆ·` | è‡ªå®šä¹‰åç§°ï¼Œä¾¿äºè¯†åˆ« |
| æä¾›å•†ç±»å‹ | `ipidea` | ä»ä¸‹æ‹‰æ¡†é€‰æ‹© |
| å¯ç”¨çŠ¶æ€ | `å¼€å¯` | ç«‹å³å¯ç”¨ |
| ä¼˜å…ˆçº§ | `100` | æ•°å€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ |
| æ¯GBæˆæœ¬ | `3.00` | USDï¼Œæ ¹æ®å®é™…å¥—é¤å¡«å†™ |

**é…ç½® JSONï¼š**

```json
{
  "apiKey": "ä½ çš„AppKey",
  "username": "ä½ çš„è®¤è¯ç”¨æˆ·å",
  "password": "ä½ çš„è®¤è¯å¯†ç ",
  "gateway": "ä½ çš„ä¸“å±ç½‘å…³åœ°å€.lqz.na.ipidea.online",
  "port": 2336,
  "apiUrl": "https://api.ipidea.net"
}
```

**å®Œæ•´ç¤ºä¾‹ï¼š**

```json
{
  "apiKey": "abc123def456ghi789",
  "username": "user123456",
  "password": "pass123456",
  "gateway": "e255c08e04856698.lqz.na.ipidea.online",
  "port": 2336,
  "apiUrl": "https://api.ipidea.net"
}
```

### 2.4 ä¿å­˜å¹¶æµ‹è¯•

1. ç‚¹å‡» **"ä¿å­˜"** æŒ‰é’®
2. åœ¨åˆ—è¡¨ä¸­æ‰¾åˆ°åˆšæ·»åŠ çš„ IPIDEA
3. ç‚¹å‡» **"æµ‹è¯•è¿æ¥"** å›¾æ ‡ (ğŸ”Œ)
4. ç­‰å¾…æµ‹è¯•ç»“æœï¼š
   - âœ… **æˆåŠŸ**: æ˜¾ç¤º "æµ‹è¯•æˆåŠŸ (å»¶è¿Ÿ: XXXms)"
   - âŒ **å¤±è´¥**: æ£€æŸ¥é…ç½®æ˜¯å¦æ­£ç¡®

---

## ğŸ”§ æ­¥éª¤ 3: æ·»åŠ æœåŠ¡å™¨ IP åˆ°ç™½åå•

IPIDEA ä½¿ç”¨ IP ç™½åå•è®¤è¯ï¼Œéœ€è¦å°†ä½ çš„æœåŠ¡å™¨ IP æ·»åŠ åˆ°ç™½åå•ã€‚

### 3.1 è·å–æœåŠ¡å™¨å…¬ç½‘ IP

```bash
curl https://api.ipify.org
```

### 3.2 åœ¨ Web ç•Œé¢æ·»åŠ ç™½åå•

1. åœ¨æä¾›å•†åˆ—è¡¨ä¸­ï¼Œç‚¹å‡» IPIDEA çš„ **"IPIDEA ç®¡ç†"** æŒ‰é’® (âš™ï¸)
2. è¿›å…¥ IPIDEA ç®¡ç†é¡µé¢
3. ç‚¹å‡» **"IP ç™½åå•"** æ ‡ç­¾
4. ç‚¹å‡» **"æ·»åŠ  IP"** æŒ‰é’®
5. è¾“å…¥æœåŠ¡å™¨å…¬ç½‘ IP
6. ç‚¹å‡» **"ç¡®å®š"**

---

## ğŸ“Š æ­¥éª¤ 4: ç›‘æ§å’Œç®¡ç†

### 4.1 æŸ¥çœ‹æµé‡ç»Ÿè®¡

åœ¨ IPIDEA ç®¡ç†é¡µé¢ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼š

- **å‰©ä½™æµé‡**: å®æ—¶æ˜¾ç¤ºå‰©ä½™ GB æ•°
- **ä½¿ç”¨è¿›åº¦æ¡**: ç›´è§‚æ˜¾ç¤ºä½¿ç”¨æƒ…å†µ
- **é¢„è­¦çŠ¶æ€**: ä½äºé˜ˆå€¼æ—¶çº¢è‰²æ˜¾ç¤º

### 4.2 è®¾ç½®æµé‡é¢„è­¦

1. ç‚¹å‡» **"è®¾ç½®é¢„è­¦"** æŒ‰é’®
2. è¾“å…¥é¢„è­¦é˜ˆå€¼ï¼ˆå•ä½ï¼šMBï¼‰
   - ä¾‹å¦‚: `1000` (å‰©ä½™1GBæ—¶é¢„è­¦)
3. ç‚¹å‡» **"ç¡®å®š"**

å½“æµé‡ä½äºé˜ˆå€¼æ—¶ï¼ŒIPIDEA ä¼šå‘é€é€šçŸ¥ã€‚

### 4.3 æŸ¥çœ‹è®¤è¯è´¦æˆ·

ç‚¹å‡» **"è®¤è¯è´¦æˆ·"** æ ‡ç­¾ï¼Œå¯ä»¥çœ‹åˆ°ï¼š

- è´¦æˆ·åå’Œå¯†ç ï¼ˆå·²è„±æ•ï¼‰
- æµé‡é™åˆ¶å’Œä½¿ç”¨æƒ…å†µ
- æ¯ä¸ªè´¦æˆ·çš„å‰©ä½™æµé‡
- è´¦æˆ·çŠ¶æ€

### 4.4 æŸ¥çœ‹æ”¯æŒåŒºåŸŸ

ç‚¹å‡» **"æ”¯æŒåŒºåŸŸ"** æ ‡ç­¾ï¼ŒæŸ¥çœ‹ IPIDEA æ”¯æŒçš„æ‰€æœ‰å›½å®¶/åœ°åŒºã€‚

---

## ğŸ” æ­¥éª¤ 5: ä½¿ç”¨ä»£ç†

### 5.1 é€šè¿‡ API è·å–ä»£ç†

**åŸºç¡€ä»£ç†ï¼ˆåŠ¨æ€ IPï¼‰ï¼š**

```bash
curl http://localhost:30000/proxy/acquire \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "provider": "ipidea",
    "country": "us"
  }'
```

**ç²˜æ€§ä¼šè¯ï¼ˆå›ºå®š IP 30 åˆ†é’Ÿï¼‰ï¼š**

```bash
curl http://localhost:30000/proxy/acquire \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "provider": "ipidea",
    "country": "us",
    "city": "newyork",
    "session": "sticky",
    "sessionDuration": 30
  }'
```

### 5.2 å“åº”ç¤ºä¾‹

```json
{
  "id": "ipidea-tunnel-1-1234567890",
  "host": "e255c08e04856698.lqz.na.ipidea.online",
  "port": 2336,
  "username": "user123456-zone-custom-region-us-city-newyork-session-abc123-sessTime-30",
  "password": "pass123456",
  "protocol": "http",
  "provider": "ipidea",
  "location": {
    "country": "us",
    "city": "newyork"
  }
}
```

### 5.3 ä½¿ç”¨ä»£ç†

**Node.js (axios):**

```javascript
const axios = require('axios');

const proxy = {
  host: 'e255c08e04856698.lqz.na.ipidea.online',
  port: 2336,
  auth: {
    username: 'user123456-zone-custom-region-us-city-newyork',
    password: 'pass123456'
  }
};

axios.get('https://api.ipify.org?format=json', { proxy })
  .then(response => {
    console.log('My proxy IP:', response.data.ip);
  });
```

**cURL:**

```bash
curl -x http://user123456-zone-custom:pass123456@e255c08e04856698.lqz.na.ipidea.online:2336 \
  https://api.ipify.org
```

---

## ğŸ¨ é«˜çº§ç”¨æ³•

### ç”¨æˆ·åå‚æ•°è¯´æ˜

IPIDEA é€šè¿‡ç”¨æˆ·åå­—ç¬¦ä¸²æ§åˆ¶ä»£ç†è¡Œä¸ºï¼š

```
{account}-zone-custom[-region-{country}][-st-{state}][-city-{city}][-session-{id}][-sessTime-{minutes}][-asn-{asn}]
```

**å‚æ•°è¯´æ˜ï¼š**

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `zone-custom` | å¿…éœ€ï¼Œä»£ç†æ± æ ‡è¯† | `-zone-custom` |
| `region-{country}` | å›½å®¶ä»£ç  | `-region-us`, `-region-jp` |
| `st-{state}` | å·/çœ | `-st-california`, `-st-newyork` |
| `city-{city}` | åŸå¸‚ | `-city-losangeles`, `-city-newyork` |
| `session-{id}` | ä¼šè¯IDï¼ˆå›ºå®šå‡ºå£IPï¼‰ | `-session-abc123` |
| `sessTime-{minutes}` | IPæ—¶æ•ˆï¼ˆ1-120åˆ†é’Ÿï¼‰ | `-sessTime-30`, `-sessTime-120` |
| `asn-{asn}` | ISPè¿è¥å•†ç¼–å· | `-asn-2516` |

**ç¤ºä¾‹ï¼š**

```
# åŸºç¡€åŠ¨æ€ä»£ç†
user123456-zone-custom

# ç¾å›½çº½çº¦å›ºå®š30åˆ†é’Ÿ
user123456-zone-custom-region-us-city-newyork-session-abc123-sessTime-30

# æ—¥æœ¬ä¸œäº¬æŒ‡å®šISP
user123456-zone-custom-region-jp-city-tokyo-asn-2516

# ç¾å›½åŠ å·æ´›æ‰çŸ¶å›ºå®š1å°æ—¶
user123456-zone-custom-region-us-st-california-city-losangeles-session-xyz789-sessTime-60
```

---

## ğŸ“¡ API ç«¯ç‚¹å‚è€ƒ

### æä¾›å•†ç®¡ç†

```bash
# è·å–æ‰€æœ‰æä¾›å•†
GET /proxy/providers

# åˆ›å»ºæä¾›å•†
POST /proxy/providers

# æ›´æ–°æä¾›å•†
PUT /proxy/providers/:id

# åˆ é™¤æä¾›å•†
DELETE /proxy/providers/:id

# æµ‹è¯•è¿æ¥
POST /proxy/providers/:id/test

# åˆ‡æ¢å¯ç”¨çŠ¶æ€
PUT /proxy/providers/:id/toggle
```

### IPIDEA ä¸“ç”¨ API

```bash
# è·å–å‰©ä½™æµé‡
GET /proxy/ipidea/:providerId/flow/remaining

# è·å–æµé‡ä½¿ç”¨è®°å½•
GET /proxy/ipidea/:providerId/flow/usage

# è®¾ç½®æµé‡é¢„è­¦
POST /proxy/ipidea/:providerId/flow/warning

# è·å–ç™½åå•
GET /proxy/ipidea/:providerId/whitelist

# æ·»åŠ ç™½åå•
POST /proxy/ipidea/:providerId/whitelist

# åˆ é™¤ç™½åå•
DELETE /proxy/ipidea/:providerId/whitelist/:ip

# è·å–è´¦æˆ·åˆ—è¡¨
GET /proxy/ipidea/:providerId/accounts

# è·å–æ”¯æŒåŒºåŸŸ
GET /proxy/ipidea/:providerId/regions
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æµ‹è¯•è¿æ¥å¤±è´¥

**å¯èƒ½åŸå› ï¼š**
1. AppKey ä¸æ­£ç¡®
2. ç½‘å…³åœ°å€é”™è¯¯
3. æœåŠ¡å™¨ IP æœªåŠ å…¥ç™½åå•
4. ç«¯å£é”™è¯¯ï¼ˆå°è¯• 2336 æˆ– 2333ï¼‰

**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥é…ç½® JSON ä¸­çš„æ‰€æœ‰å­—æ®µ
2. åœ¨ IPIDEA æ§åˆ¶å°éªŒè¯ä¿¡æ¯
3. æ·»åŠ æœåŠ¡å™¨ IP åˆ°ç™½åå•
4. å°è¯•æ›´æ¢ç«¯å£

### Q2: è·å–æµé‡ä¿¡æ¯å¤±è´¥

**å¯èƒ½åŸå› ï¼š**
- AppKey æƒé™ä¸è¶³
- API ç«¯ç‚¹é”™è¯¯

**è§£å†³æ–¹æ³•ï¼š**
- ç¡®è®¤ `apiUrl` ä¸º `https://api.ipidea.net`
- æ£€æŸ¥ AppKey æ˜¯å¦æœ‰ API è°ƒç”¨æƒé™

### Q3: ä»£ç†è¿æ¥å¤±è´¥

**å¯èƒ½åŸå› ï¼š**
1. ç”¨æˆ·å/å¯†ç é”™è¯¯
2. ç½‘å…³åœ°å€é”™è¯¯
3. IP æœªåœ¨ç™½åå•ä¸­

**è§£å†³æ–¹æ³•ï¼š**
1. éªŒè¯è®¤è¯ç”¨æˆ·åå’Œå¯†ç 
2. ç¡®è®¤ç½‘å…³åœ°å€æ ¼å¼æ­£ç¡®
3. åœ¨ Web ç•Œé¢æ·»åŠ  IP åˆ°ç™½åå•

### Q4: æµé‡æ¶ˆè€—å¾ˆå¿«

**å»ºè®®ï¼š**
1. è®¾ç½®æµé‡é¢„è­¦ï¼ˆå¦‚å‰©ä½™ 1GB æ—¶é¢„è­¦ï¼‰
2. ä½¿ç”¨ç²˜æ€§ä¼šè¯å‡å°‘ IP è½®æ¢
3. ç›‘æ§ä½¿ç”¨æƒ…å†µï¼ŒåŠæ—¶å……å€¼

---

## âœ… æ£€æŸ¥æ¸…å•

é…ç½®å®Œæˆåï¼Œç¡®ä¿ä»¥ä¸‹é¡¹ç›®éƒ½å·²å®Œæˆï¼š

- [ ] IPIDEA å·²åœ¨ Web ç•Œé¢æ·»åŠ 
- [ ] é…ç½® JSON åŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ
- [ ] æµ‹è¯•è¿æ¥æˆåŠŸ
- [ ] æœåŠ¡å™¨ IP å·²æ·»åŠ åˆ°ç™½åå•
- [ ] æµé‡é¢„è­¦å·²è®¾ç½®
- [ ] å¯ä»¥æˆåŠŸè·å–ä»£ç†
- [ ] ä»£ç†å¯ä»¥æ­£å¸¸ä½¿ç”¨

---

## ğŸš€ å¿«é€Ÿæµ‹è¯•è„šæœ¬

ä¿å­˜ä¸º `test-ipidea.sh`:

```bash
#!/bin/bash

# é…ç½®
TOKEN="your-jwt-token"
API_BASE="http://localhost:30000"
PROVIDER_ID="your-provider-id"

echo "=== Testing IPIDEA Configuration ==="

# 1. è·å–æµé‡ä¿¡æ¯
echo "1. Getting flow stats..."
curl -s "$API_BASE/proxy/ipidea/$PROVIDER_ID/flow/remaining" \
  -H "Authorization: Bearer $TOKEN" | jq

# 2. è·å–ç™½åå•
echo "2. Getting whitelist..."
curl -s "$API_BASE/proxy/ipidea/$PROVIDER_ID/whitelist" \
  -H "Authorization: Bearer $TOKEN" | jq

# 3. è·å–ä»£ç†
echo "3. Acquiring proxy..."
curl -s "$API_BASE/proxy/acquire" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"provider": "ipidea", "country": "us"}' | jq

echo "=== Test Complete ==="
```

è¿è¡Œ:
```bash
chmod +x test-ipidea.sh
./test-ipidea.sh
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [IPIDEA å®˜æ–¹æ–‡æ¡£](https://help.ipidea.net/)
- [ä»£ç†æä¾›å•†é…ç½®å‚è€ƒ](./PROVIDER_CONFIG_REFERENCE.md)
- [IPIDEA Adapter å®ç°](./src/adapters/ipidea/ipidea.adapter.ts)

---

## ğŸ’¡ æç¤º

1. **ä¿å­˜é…ç½®å¤‡ä»½**ï¼šåœ¨ Web ç•Œé¢é…ç½®å®Œæˆåï¼Œå»ºè®®å¯¼å‡ºé…ç½® JSON ä¿å­˜
2. **å®šæœŸæ£€æŸ¥æµé‡**ï¼šåœ¨ IPIDEA ç®¡ç†é¡µé¢ç›‘æ§æµé‡ä½¿ç”¨æƒ…å†µ
3. **ä½¿ç”¨ç²˜æ€§ä¼šè¯**ï¼šéœ€è¦å›ºå®š IP æ—¶ï¼Œä½¿ç”¨ `session` å’Œ `sessTime` å‚æ•°
4. **æˆæœ¬ä¼˜åŒ–**ï¼šæ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„å›½å®¶å’Œæ—¶é•¿ï¼Œé¿å…æµªè´¹

---

**å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ—¥å¿—ï¼š**
```bash
pm2 logs proxy-service
```
