# ============================================
# Proxy Service Enhancement Features
# 增强功能环境变量配置
# ============================================

# ==================== 审计日志配置 ====================
# 审计日志加密密钥（用于敏感数据AES-256-GCM加密）
AUDIT_ENCRYPTION_KEY=your-secure-encryption-key-32-chars-minimum

# 审计日志保留天数（默认90天）
AUDIT_LOG_RETENTION_DAYS=90

# ==================== 告警系统配置 ====================
# Email通道配置
ALERT_EMAIL_SMTP_HOST=smtp.example.com
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_SMTP_USER=alerts@example.com
ALERT_EMAIL_SMTP_PASS=your-smtp-password
ALERT_EMAIL_FROM=noreply@cloudphone.com

# SMS通道配置（可选）
ALERT_SMS_PROVIDER=twilio
ALERT_SMS_API_KEY=your-sms-api-key
ALERT_SMS_API_SECRET=your-sms-api-secret
ALERT_SMS_FROM_NUMBER=+1234567890

# Webhook通道配置
ALERT_WEBHOOK_TIMEOUT=10000
ALERT_WEBHOOK_RETRY_ATTEMPTS=3

# DingTalk配置（可选）
ALERT_DINGTALK_WEBHOOK=https://oapi.dingtalk.com/robot/send?access_token=xxx
ALERT_DINGTALK_SECRET=your-dingtalk-secret

# 企业微信配置（可选）
ALERT_WECHAT_CORPID=your-corp-id
ALERT_WECHAT_CORPSECRET=your-corp-secret
ALERT_WECHAT_AGENTID=1000001

# Slack配置（可选）
ALERT_SLACK_WEBHOOK=https://hooks.slack.com/services/xxx/yyy/zzz
ALERT_SLACK_CHANNEL=#alerts

# ==================== 报告生成配置 ====================
# 报告存储路径（本地或云存储）
REPORT_STORAGE_TYPE=local
REPORT_STORAGE_PATH=/var/reports

# MinIO/S3配置（如果使用云存储）
REPORT_S3_ENDPOINT=http://localhost:9000
REPORT_S3_ACCESS_KEY=minioadmin
REPORT_S3_SECRET_KEY=minioadmin
REPORT_S3_BUCKET=proxy-reports
REPORT_S3_REGION=us-east-1

# 报告生成并发数
REPORT_MAX_CONCURRENT_JOBS=3

# 报告文件保留天数
REPORT_RETENTION_DAYS=30

# PDF生成配置
PDF_GENERATION_TIMEOUT=60000
PDF_PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium-browser

# ==================== 成本监控配置 ====================
# 默认货币
COST_DEFAULT_CURRENCY=USD

# 成本预算告警阈值（百分比）
COST_ALERT_THRESHOLDS=50,80,95,100

# 成本报告发送周期（cron表达式）
COST_REPORT_CRON=0 9 * * 1

# ==================== 智能推荐配置 ====================
# 推荐算法权重配置
INTELLIGENCE_SUCCESS_RATE_WEIGHT=0.35
INTELLIGENCE_LATENCY_WEIGHT=0.25
INTELLIGENCE_COST_WEIGHT=0.20
INTELLIGENCE_QUALITY_WEIGHT=0.15
INTELLIGENCE_AFFINITY_WEIGHT=0.05

# 推荐缓存时间（秒）
INTELLIGENCE_CACHE_TTL=300

# ==================== 质量评分配置 ====================
# 质量评分更新间隔（秒）
QUALITY_SCORE_UPDATE_INTERVAL=300

# 质量等级阈值
QUALITY_GRADE_S_THRESHOLD=90
QUALITY_GRADE_A_THRESHOLD=80
QUALITY_GRADE_B_THRESHOLD=70
QUALITY_GRADE_C_THRESHOLD=60

# ==================== 故障切换配置 ====================
# 故障检测阈值
FAILOVER_FAILURE_THRESHOLD=3
FAILOVER_TIMEOUT_THRESHOLD=5000

# 故障切换策略（默认）
FAILOVER_DEFAULT_STRATEGY=quality_based

# 重试配置
FAILOVER_MAX_RETRIES=3
FAILOVER_RETRY_DELAY=1000

# ==================== 粘性会话配置 ====================
# 粘性会话最大时长（秒，30天）
STICKY_SESSION_MAX_DURATION=2592000

# 会话续期通知提前时间（秒，7天）
STICKY_SESSION_RENEWAL_NOTICE_ADVANCE=604800

# 自动续期默认配置
STICKY_SESSION_AUTO_RENEW_DEFAULT=false

# ==================== 地理匹配配置 ====================
# 地理位置API配置
GEO_LOCATION_API_KEY=your-geo-api-key
GEO_LOCATION_API_URL=https://api.ipgeolocation.io/ipgeo

# 城市级匹配精度（米）
GEO_CITY_MATCH_RADIUS_METERS=50000

# ==================== Provider排名配置 ====================
# 排名更新频率（小时）
PROVIDER_RANKING_UPDATE_HOURS=1

# 排名历史保留天数
PROVIDER_RANKING_HISTORY_DAYS=30

# 性能权重配置
PROVIDER_SCORE_RELIABILITY_WEIGHT=0.4
PROVIDER_SCORE_PERFORMANCE_WEIGHT=0.3
PROVIDER_SCORE_COST_WEIGHT=0.2
PROVIDER_SCORE_COVERAGE_WEIGHT=0.1

# ==================== 设备组配置 ====================
# 设备组最大容量
DEVICE_GROUP_MAX_SIZE=1000

# 自动扩展默认比例（代理数/设备数）
DEVICE_GROUP_DEFAULT_SCALING_RATIO=2.0

# ==================== 性能调优配置 ====================
# 数据库连接池大小
DB_POOL_SIZE=20
DB_POOL_MAX=50

# Redis缓存配置
REDIS_CACHE_TTL=3600
REDIS_MAX_RETRIES=3

# HTTP请求超时（毫秒）
HTTP_TIMEOUT=30000

# 批量操作最大并发数
BATCH_OPERATION_CONCURRENCY=10

# ==================== 日志配置 ====================
# 日志级别
LOG_LEVEL=info

# 是否启用详细审计日志
ENABLE_VERBOSE_AUDIT=false

# 是否启用性能跟踪
ENABLE_PERFORMANCE_TRACKING=true

# ==================== 功能开关 ====================
# 启用智能推荐
ENABLE_INTELLIGENCE=true

# 启用质量评分
ENABLE_QUALITY_SCORING=true

# 启用故障切换
ENABLE_FAILOVER=true

# 启用粘性会话
ENABLE_STICKY_SESSION=true

# 启用成本监控
ENABLE_COST_MONITORING=true

# 启用地理匹配
ENABLE_GEO_MATCHING=true

# 启用Provider排名
ENABLE_PROVIDER_RANKING=true

# 启用告警系统
ENABLE_ALERTS=true

# 启用报告生成
ENABLE_REPORTS=true

# 启用审计日志
ENABLE_AUDIT_LOGS=true

# 启用设备组管理
ENABLE_DEVICE_GROUPS=true
