# ========================================
# Device Service 环境变量配置示例
# 复制此文件为 .env 并填入实际值
# ========================================

# ===== 运行环境 =====
NODE_ENV=development
PORT=3002

# ===== 数据库配置 =====
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=postgres
DB_DATABASE=cloudphone

# ===== Redis 配置 =====
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ===== JWT 配置 =====
JWT_SECRET=your-secret-key-change-in-production
JWT_EXPIRES_IN=24h

# ========================================
# Docker 配置
# ========================================
DOCKER_HOST=/var/run/docker.sock
DOCKER_NETWORK=cloudphone_network
DOCKER_STORAGE_DRIVER=overlay2
DOCKER_DATA_ROOT=/var/lib/docker

# ========================================
# Redroid 配置
# ========================================
# Redroid 镜像标签（留空则根据 androidVersion 自动选择）
# 可选值: redroid/redroid:11.0.0-latest, redroid/redroid:12.0.0-latest, redroid/redroid:13.0.0-latest
REDROID_IMAGE=

# 默认 Android 版本 (11, 12, 13)
DEFAULT_ANDROID_VERSION=11

# GPU 加速 (需要宿主机支持 /dev/dri)
# 设置为 true 启用 GPU 加速，可提升图形性能
REDROID_ENABLE_GPU=false
REDROID_GPU_MODE=guest
REDROID_GPU_DRIVER=virgl

# 音频支持
REDROID_ENABLE_AUDIO=false

# ========================================
# 端口范围配置
# ========================================
# ADB 端口范围 (每个设备占用1个端口)
ADB_PORT_START=5555
ADB_PORT_END=6554

# WebRTC 端口范围
WEBRTC_PORT_START=8080
WEBRTC_PORT_END=9079

# SCRCPY 端口范围 (可选)
SCRCPY_PORT_START=27183
SCRCPY_PORT_END=28182

# ========================================
# 设备资源默认配置
# ========================================
DEFAULT_CPU_CORES=2
DEFAULT_MEMORY_MB=4096
DEFAULT_STORAGE_MB=10240
DEFAULT_RESOLUTION=1080x1920
DEFAULT_DPI=320

# ========================================
# ADB 配置
# ========================================
ADB_HOST=localhost
ADB_PORT=5037
ADB_CONNECTION_TIMEOUT=5000
ADB_COMMAND_TIMEOUT=30000

# 截图保存目录
SCREENSHOT_DIR=/tmp/screenshots

# ========================================
# 健康检查配置
# ========================================
# 健康检查间隔（秒）
HEALTH_CHECK_INTERVAL=30

# 设备心跳超时（秒）
DEVICE_HEARTBEAT_TIMEOUT=60

# 容器启动超时（秒）
CONTAINER_START_TIMEOUT=120

# Android 启动超时（秒）
ANDROID_BOOT_TIMEOUT=60

# 自动恢复功能
DEVICE_AUTO_RECOVERY=true

# 自动恢复重试次数
AUTO_RECOVERY_MAX_RETRIES=3

# ========================================
# 微服务地址
# ========================================
SCHEDULER_SERVICE_URL=http://localhost:30004
MEDIA_SERVICE_URL=http://localhost:30006

# ========================================
# 日志配置
# ========================================
LOG_LEVEL=info
LOG_FORMAT=json
ENABLE_FILE_LOGGING=true
