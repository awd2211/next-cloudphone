{
  "title": "Cloud Phone - Business Metrics",
  "tags": [
    "cloudphone",
    "business",
    "metrics",
    "kpi"
  ],
  "timezone": "browser",
  "schemaVersion": 16,
  "version": 2,
  "refresh": "30s",
  "time": {
    "from": "now-6h",
    "to": "now"
  },
  "panels": [
    {
      "id": 1,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "type": "row",
      "title": "ğŸ“Š æ ¸å¿ƒä¸šåŠ¡æŒ‡æ ‡ (KPIs)"
    },
    {
      "id": 2,
      "gridPos": {
        "h": 5,
        "w": 4,
        "x": 0,
        "y": 1
      },
      "type": "stat",
      "title": "æ€»ç”¨æˆ·æ•°",
      "targets": [
        {
          "expr": "cloudphone_users_total",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "value": 0,
                "color": "blue"
              },
              {
                "value": 100,
                "color": "green"
              },
              {
                "value": 1000,
                "color": "yellow"
              }
            ]
          }
        }
      },
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "textMode": "value_and_name"
      }
    },
    {
      "id": 3,
      "gridPos": {
        "h": 5,
        "w": 4,
        "x": 4,
        "y": 1
      },
      "type": "stat",
      "title": "åœ¨çº¿ç”¨æˆ·æ•°",
      "targets": [
        {
          "expr": "cloudphone_users_online",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "value": 0,
                "color": "red"
              },
              {
                "value": 10,
                "color": "yellow"
              },
              {
                "value": 50,
                "color": "green"
              }
            ]
          }
        }
      },
      "options": {
        "colorMode": "background",
        "graphMode": "area"
      }
    },
    {
      "id": 4,
      "gridPos": {
        "h": 5,
        "w": 4,
        "x": 8,
        "y": 1
      },
      "type": "stat",
      "title": "è¿è¡Œä¸­è®¾å¤‡",
      "targets": [
        {
          "expr": "cloudphone_devices_running",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": {
            "mode": "thresholds"
          }
        }
      },
      "options": {
        "colorMode": "background",
        "graphMode": "area"
      }
    },
    {
      "id": 5,
      "gridPos": {
        "h": 5,
        "w": 4,
        "x": 12,
        "y": 1
      },
      "type": "stat",
      "title": "æ€»è¥æ”¶",
      "targets": [
        {
          "expr": "cloudphone_total_revenue",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "currencyCNY",
          "decimals": 2,
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "value": 0,
                "color": "blue"
              },
              {
                "value": 10000,
                "color": "green"
              },
              {
                "value": 100000,
                "color": "yellow"
              }
            ]
          }
        }
      },
      "options": {
        "colorMode": "background",
        "graphMode": "area"
      }
    },
    {
      "id": 6,
      "gridPos": {
        "h": 5,
        "w": 4,
        "x": 16,
        "y": 1
      },
      "type": "stat",
      "title": "ä½™é¢ä¸è¶³ç”¨æˆ·",
      "targets": [
        {
          "expr": "cloudphone_users_low_balance",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "value": 0,
                "color": "green"
              },
              {
                "value": 10,
                "color": "yellow"
              },
              {
                "value": 50,
                "color": "red"
              }
            ]
          }
        }
      },
      "options": {
        "colorMode": "background"
      }
    },
    {
      "id": 7,
      "gridPos": {
        "h": 5,
        "w": 4,
        "x": 20,
        "y": 1
      },
      "type": "stat",
      "title": "æ´»è·ƒè®¾å¤‡æ•°",
      "targets": [
        {
          "expr": "cloudphone_devices_active",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": {
            "mode": "thresholds"
          }
        }
      },
      "options": {
        "colorMode": "background"
      }
    },
    {
      "id": 10,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 6
      },
      "type": "row",
      "title": "ğŸ’° æ”¯ä»˜ä¸è®¡è´¹"
    },
    {
      "id": 11,
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 0,
        "y": 7
      },
      "type": "timeseries",
      "title": "æ”¯ä»˜æˆåŠŸç‡",
      "targets": [
        {
          "expr": "rate(cloudphone_payments_success_total[5m]) / rate(cloudphone_payment_attempts_total[5m]) * 100",
          "legendFormat": "æˆåŠŸç‡ %",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "min": 0,
          "max": 100,
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "fillOpacity": 10
          }
        }
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        }
      }
    },
    {
      "id": 12,
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 8,
        "y": 7
      },
      "type": "timeseries",
      "title": "æ”¯ä»˜æ“ä½œè¶‹åŠ¿",
      "targets": [
        {
          "expr": "rate(cloudphone_payment_attempts_total[5m])",
          "legendFormat": "æ”¯ä»˜å°è¯•/ç§’",
          "refId": "A"
        },
        {
          "expr": "rate(cloudphone_payments_success_total[5m])",
          "legendFormat": "æ”¯ä»˜æˆåŠŸ/ç§’",
          "refId": "B"
        },
        {
          "expr": "rate(cloudphone_payment_failures_total[5m])",
          "legendFormat": "æ”¯ä»˜å¤±è´¥/ç§’",
          "refId": "C"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": {
            "mode": "palette-classic"
          }
        }
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        }
      }
    },
    {
      "id": 13,
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 16,
        "y": 7
      },
      "type": "timeseries",
      "title": "æ”¯ä»˜è€—æ—¶åˆ†å¸ƒ (P50, P95, P99)",
      "targets": [
        {
          "expr": "histogram_quantile(0.50, rate(cloudphone_payment_duration_seconds_bucket[5m]))",
          "legendFormat": "P50",
          "refId": "A"
        },
        {
          "expr": "histogram_quantile(0.95, rate(cloudphone_payment_duration_seconds_bucket[5m]))",
          "legendFormat": "P95",
          "refId": "B"
        },
        {
          "expr": "histogram_quantile(0.99, rate(cloudphone_payment_duration_seconds_bucket[5m]))",
          "legendFormat": "P99",
          "refId": "C"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "color": {
            "mode": "palette-classic"
          }
        }
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        }
      }
    },
    {
      "id": 14,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 15
      },
      "type": "piechart",
      "title": "æ”¯ä»˜å¤±è´¥åŸå› åˆ†å¸ƒ",
      "targets": [
        {
          "expr": "sum by (reason) (increase(cloudphone_payment_failures_total[1h]))",
          "legendFormat": "{{reason}}",
          "refId": "A"
        }
      ],
      "options": {
        "legend": {
          "displayMode": "table",
          "placement": "right"
        },
        "pieType": "donut"
      }
    },
    {
      "id": 15,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 15
      },
      "type": "timeseries",
      "title": "é€€æ¬¾è¶‹åŠ¿",
      "targets": [
        {
          "expr": "rate(cloudphone_refunds_total[5m])",
          "legendFormat": "é€€æ¬¾æ¬¡æ•°/ç§’",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": {
            "mode": "palette-classic"
          }
        }
      }
    },
    {
      "id": 20,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 23
      },
      "type": "row",
      "title": "ğŸ‘¤ ç”¨æˆ·æ³¨å†Œä¸ç™»å½•"
    },
    {
      "id": 21,
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 0,
        "y": 24
      },
      "type": "timeseries",
      "title": "ç”¨æˆ·æ³¨å†Œè¶‹åŠ¿",
      "targets": [
        {
          "expr": "rate(cloudphone_user_registration_attempts_total[5m])",
          "legendFormat": "æ³¨å†Œå°è¯•/ç§’",
          "refId": "A"
        },
        {
          "expr": "rate(cloudphone_user_registration_success_total[5m])",
          "legendFormat": "æ³¨å†ŒæˆåŠŸ/ç§’",
          "refId": "B"
        },
        {
          "expr": "rate(cloudphone_user_registration_failures_total[5m])",
          "legendFormat": "æ³¨å†Œå¤±è´¥/ç§’",
          "refId": "C"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": {
            "mode": "palette-classic"
          }
        }
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        }
      }
    },
    {
      "id": 22,
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 8,
        "y": 24
      },
      "type": "timeseries",
      "title": "ç”¨æˆ·ç™»å½•è¶‹åŠ¿",
      "targets": [
        {
          "expr": "rate(cloudphone_user_login_attempts_total[5m])",
          "legendFormat": "ç™»å½•å°è¯•/ç§’",
          "refId": "A"
        },
        {
          "expr": "rate(cloudphone_user_login_success_total[5m])",
          "legendFormat": "ç™»å½•æˆåŠŸ/ç§’",
          "refId": "B"
        },
        {
          "expr": "rate(cloudphone_user_login_failures_total[5m])",
          "legendFormat": "ç™»å½•å¤±è´¥/ç§’",
          "refId": "C"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": {
            "mode": "palette-classic"
          }
        }
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        }
      }
    },
    {
      "id": 23,
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 16,
        "y": 24
      },
      "type": "stat",
      "title": "ç™»å½•æˆåŠŸç‡",
      "targets": [
        {
          "expr": "rate(cloudphone_user_login_success_total[5m]) / rate(cloudphone_user_login_attempts_total[5m]) * 100",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "decimals": 2,
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "value": 0,
                "color": "red"
              },
              {
                "value": 80,
                "color": "yellow"
              },
              {
                "value": 95,
                "color": "green"
              }
            ]
          }
        }
      },
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "textMode": "value_and_name"
      }
    },
    {
      "id": 24,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 32
      },
      "type": "piechart",
      "title": "ç™»å½•å¤±è´¥åŸå› åˆ†å¸ƒ",
      "targets": [
        {
          "expr": "sum by (reason) (increase(cloudphone_user_login_failures_total[1h]))",
          "legendFormat": "{{reason}}",
          "refId": "A"
        }
      ],
      "options": {
        "legend": {
          "displayMode": "table",
          "placement": "right"
        },
        "pieType": "donut"
      }
    },
    {
      "id": 25,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 32
      },
      "type": "timeseries",
      "title": "ç”¨æˆ·é”å®šäº‹ä»¶",
      "targets": [
        {
          "expr": "rate(cloudphone_users_locked_total[5m])",
          "legendFormat": "ç”¨æˆ·é”å®š/ç§’",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": {
            "mode": "palette-classic"
          }
        }
      }
    },
    {
      "id": 30,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 40
      },
      "type": "row",
      "title": "ğŸ“± è®¾å¤‡ç®¡ç†"
    },
    {
      "id": 31,
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 0,
        "y": 41
      },
      "type": "timeseries",
      "title": "è®¾å¤‡åˆ›å»ºè¶‹åŠ¿",
      "targets": [
        {
          "expr": "rate(cloudphone_device_creation_attempts_total[5m])",
          "legendFormat": "åˆ›å»ºå°è¯•/ç§’",
          "refId": "A"
        },
        {
          "expr": "rate(cloudphone_device_creation_failures_total[5m])",
          "legendFormat": "åˆ›å»ºå¤±è´¥/ç§’",
          "refId": "B"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": {
            "mode": "palette-classic"
          }
        }
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        }
      }
    },
    {
      "id": 32,
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 8,
        "y": 41
      },
      "type": "stat",
      "title": "è®¾å¤‡åˆ›å»ºæˆåŠŸç‡",
      "targets": [
        {
          "expr": "(rate(cloudphone_device_creation_attempts_total[5m]) - rate(cloudphone_device_creation_failures_total[5m])) / rate(cloudphone_device_creation_attempts_total[5m]) * 100",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "decimals": 2,
          "color": {
            "mode": "thresholds"
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "value": 0,
                "color": "red"
              },
              {
                "value": 90,
                "color": "yellow"
              },
              {
                "value": 98,
                "color": "green"
              }
            ]
          }
        }
      },
      "options": {
        "colorMode": "background",
        "graphMode": "area"
      }
    },
    {
      "id": 33,
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 16,
        "y": 41
      },
      "type": "timeseries",
      "title": "è®¾å¤‡çŠ¶æ€åˆ†å¸ƒ",
      "targets": [
        {
          "expr": "cloudphone_devices_running",
          "legendFormat": "è¿è¡Œä¸­",
          "refId": "A"
        },
        {
          "expr": "cloudphone_devices_stopped",
          "legendFormat": "å·²åœæ­¢",
          "refId": "B"
        },
        {
          "expr": "cloudphone_devices_error",
          "legendFormat": "é”™è¯¯",
          "refId": "C"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "color": {
            "mode": "palette-classic"
          }
        }
      },
      "options": {
        "legend": {
          "displayMode": "list",
          "placement": "bottom"
        }
      }
    },
    {
      "id": 34,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 49
      },
      "type": "piechart",
      "title": "è®¾å¤‡åˆ›å»ºå¤±è´¥åŸå› ",
      "targets": [
        {
          "expr": "sum by (reason) (increase(cloudphone_device_creation_failures_total[1h]))",
          "legendFormat": "{{reason}}",
          "refId": "A"
        }
      ],
      "options": {
        "legend": {
          "displayMode": "table",
          "placement": "right"
        },
        "pieType": "donut"
      }
    },
    {
      "id": 35,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 49
      },
      "type": "timeseries",
      "title": "è®¾å¤‡å¯åŠ¨å¤±è´¥ç‡",
      "targets": [
        {
          "expr": "rate(cloudphone_device_start_failures_total[5m]) / rate(cloudphone_device_start_attempts_total[5m]) * 100",
          "legendFormat": "å¯åŠ¨å¤±è´¥ç‡ %",
          "refId": "A"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "color": {
            "mode": "palette-classic"
          }
        }
      }
    },
    {
      "id": 40,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 57
      },
      "type": "row",
      "title": "ğŸ“Š ä¸šåŠ¡ KPI æ€»è§ˆ"
    },
    {
      "id": 41,
      "gridPos": {
        "h": 10,
        "w": 24,
        "x": 0,
        "y": 58
      },
      "type": "table",
      "title": "å…³é”®ä¸šåŠ¡æŒ‡æ ‡æ±‡æ€» (æœ€è¿‘ 1 å°æ—¶)",
      "targets": [
        {
          "expr": "sum(increase(cloudphone_user_registration_success_total[1h]))",
          "format": "table",
          "instant": true,
          "refId": "A"
        },
        {
          "expr": "sum(increase(cloudphone_user_login_success_total[1h]))",
          "format": "table",
          "instant": true,
          "refId": "B"
        },
        {
          "expr": "sum(increase(cloudphone_payments_success_total[1h]))",
          "format": "table",
          "instant": true,
          "refId": "C"
        },
        {
          "expr": "sum(increase(cloudphone_device_creation_attempts_total[1h]))",
          "format": "table",
          "instant": true,
          "refId": "D"
        },
        {
          "expr": "cloudphone_total_revenue",
          "format": "table",
          "instant": true,
          "refId": "E"
        }
      ],
      "transformations": [
        {
          "id": "merge",
          "options": {}
        },
        {
          "id": "organize",
          "options": {
            "renameByName": {
              "Value #A": "æ–°æ³¨å†Œç”¨æˆ·",
              "Value #B": "æˆåŠŸç™»å½•æ¬¡æ•°",
              "Value #C": "æˆåŠŸæ”¯ä»˜æ¬¡æ•°",
              "Value #D": "è®¾å¤‡åˆ›å»ºå°è¯•",
              "Value #E": "æ€»è¥æ”¶ (Â¥)"
            }
          }
        }
      ],
      "options": {
        "showHeader": true
      }
    }
  ]
}
