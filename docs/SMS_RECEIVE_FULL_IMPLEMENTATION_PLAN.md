# SMSéªŒè¯ç æ¥æ”¶æœåŠ¡ - å…¨åŠŸèƒ½å®æ–½è®¡åˆ’

> **åŸºäºç”¨æˆ·éœ€æ±‚**: å®Œæ•´çš„ä¼ä¸šçº§éªŒè¯ç æ¥æ”¶è§£å†³æ–¹æ¡ˆ
> **ç”Ÿæˆæ—¶é—´**: 2025-11-02

---

## âœ… åŠŸèƒ½æ¸…å•æ€»ç»“

æ ¹æ®ä½ çš„é€‰æ‹©ï¼Œæœ¬æ–¹æ¡ˆå°†å®ç°ï¼š

### æ ¸å¿ƒåŠŸèƒ½ï¼ˆ100%è¦†ç›–ï¼‰
- âœ… **å•ä¸ªå·ç è¯·æ±‚** - ä¸ºå•ä¸ªè®¾å¤‡è¯·æ±‚è™šæ‹Ÿå·ç 
- âœ… **æ‰¹é‡å·ç è¯·æ±‚** - ä¸€æ¬¡æ€§ä¸ºæœ€å¤š100ä¸ªè®¾å¤‡æ‰¹é‡è¯·æ±‚
- âœ… **å·ç æ± é¢„çƒ­** - æå‰è´­ä¹°å¹¶ç¼“å­˜å¸¸ç”¨å·ç ï¼ˆå“åº”é€Ÿåº¦æå‡75%ï¼‰
- âœ… **è‡ªåŠ¨å–æ¶ˆé€€æ¬¾** - è¶…æ—¶è‡ªåŠ¨å–æ¶ˆå¹¶é€€æ¬¾ï¼ˆèŠ‚çœ20-30%æˆæœ¬ï¼‰

### å¹³å°é›†æˆï¼ˆ3å¹³å°å…¨è¦†ç›–ï¼‰
- âœ… **SMS-Activate** - ä¸»å¹³å°ï¼ˆ180+å›½å®¶ï¼Œ5000+åº”ç”¨ï¼‰
- âœ… **5sim** - å¤‡ç”¨å¹³å°1ï¼ˆæˆæœ¬ä¼˜åŒ–ï¼ŒJWTè®¤è¯ï¼‰
- âœ… **SMSPool** - å¤‡ç”¨å¹³å°2ï¼ˆé«˜é£é™©å¹³å°æ”¯æŒï¼‰
- âœ… **å¤šå¹³å°æ™ºèƒ½åˆ‡æ¢** - è‡ªåŠ¨åœ¨å¹³å°é—´åˆ‡æ¢ï¼ˆå¯ç”¨æ€§99.9%+ï¼‰

### é«˜çº§åŠŸèƒ½ï¼ˆå…¨éƒ¨å®ç°ï¼‰
- âœ… **æ™ºèƒ½è½®è¯¢ä¼˜åŒ–** - æŒ‡æ•°é€€é¿ç®—æ³•ï¼ˆèŠ‚çœ30% APIè°ƒç”¨æˆæœ¬ï¼‰
- âœ… **æˆæœ¬ç»Ÿè®¡åˆ†æ** - å¤šç»´åº¦æŠ¥è¡¨ï¼ˆæŒ‰æ—¥/å‘¨/æœˆ/å¹³å°/æœåŠ¡/å›½å®¶ï¼‰
- âœ… **ä½™é¢ç›‘æ§å‘Šè­¦** - è‡ªåŠ¨å‘Šè­¦ï¼ˆé‚®ä»¶/çŸ­ä¿¡/é’‰é’‰/ä¼ä¸šå¾®ä¿¡ï¼‰
- âœ… **å·ç ç§Ÿèµæ”¯æŒ** - 24å°æ—¶ç§Ÿèµï¼ˆé€‚åˆå¤šæ¬¡éªŒè¯åœºæ™¯ï¼‰

### ç³»ç»Ÿé›†æˆï¼ˆå…¨é¢é›†æˆï¼‰
- âœ… **Device Serviceé›†æˆ** - WebSocketå®æ—¶æ¨é€éªŒè¯ç 
- âœ… **Billing Serviceé›†æˆ** - è‡ªåŠ¨è®°å½•æˆæœ¬åˆ°è®¡è´¹ç³»ç»Ÿ
- âœ… **Notification Serviceé›†æˆ** - éªŒè¯ç åˆ°è¾¾é€šçŸ¥ã€ä½™é¢å‘Šè­¦
- âœ… **Adminå‰ç«¯ç®¡ç†** - å®Œæ•´çš„ç®¡ç†ç•Œé¢ï¼ˆå¹³å°çŠ¶æ€ã€æˆæœ¬åˆ†æã€é…ç½®ç®¡ç†ï¼‰

---

## ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”

| é¡¹ç›® | åŸºç¡€æ–¹æ¡ˆ | **ä½ çš„å…¨åŠŸèƒ½æ–¹æ¡ˆ** |
|------|---------|------------------|
| **å¹³å°æ•°é‡** | 1-2ä¸ª | **3ä¸ªï¼ˆå…¨è¦†ç›–ï¼‰** |
| **å·ç æ± ** | âŒ | **âœ… é¢„çƒ­+ç¼“å­˜** |
| **æ™ºèƒ½è½®è¯¢** | åŸºç¡€è½®è¯¢ | **âœ… æŒ‡æ•°é€€é¿ä¼˜åŒ–** |
| **æ‰¹é‡æ“ä½œ** | âŒ | **âœ… æœ€å¤š100ä¸ª** |
| **å·ç ç§Ÿèµ** | âŒ | **âœ… 24å°æ—¶ç§Ÿèµ** |
| **æˆæœ¬ç»Ÿè®¡** | åŸºç¡€ | **âœ… å¤šç»´åº¦æŠ¥è¡¨** |
| **å‘Šè­¦ç›‘æ§** | æ‰‹åŠ¨ | **âœ… è‡ªåŠ¨å‘Šè­¦** |
| **å‰ç«¯ç®¡ç†** | API only | **âœ… å®Œæ•´UI** |
| **å¼€å‘æ—¶é—´** | 4å‘¨ | **6å‘¨** |
| **æˆæœ¬èŠ‚çœ** | 10-15% | **30-40%** |
| **å¯ç”¨æ€§** | 95% | **99.9%** |

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„ï¼ˆå…¨åŠŸèƒ½ç‰ˆï¼‰

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        API Gateway (30000)                          â”‚
â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                  â”‚  /api/sms/* (ç»Ÿä¸€å…¥å£)     â”‚                     â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SMS Receive Service (30007) - æ ¸å¿ƒå¾®æœåŠ¡               â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Controller Layer                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚
â”‚  â”‚  â”‚ Numbers  â”‚ â”‚ Messages â”‚ â”‚ Providersâ”‚ â”‚ Stats    â”‚       â”‚  â”‚
â”‚  â”‚  â”‚Controllerâ”‚ â”‚Controllerâ”‚ â”‚Controllerâ”‚ â”‚Controllerâ”‚       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      Service Layer                            â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚  â”‚  â”‚      NumberManagementService                   â”‚          â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ å·ç è¯·æ±‚ä¸åˆ†é…                                â”‚          â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ å·ç æ± ç®¡ç†ï¼ˆé¢„çƒ­+ç¼“å­˜ï¼‰                        â”‚          â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ å¹³å°æ™ºèƒ½é€‰æ‹©ï¼ˆä¸»â†’å¤‡ç”¨1â†’å¤‡ç”¨2ï¼‰                 â”‚          â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ æ‰¹é‡æ“ä½œï¼ˆå¹¶å‘æ§åˆ¶+é™æµï¼‰                       â”‚          â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ å·ç ç§Ÿèµï¼ˆ24å°æ—¶å¤šæ¬¡æ¥æ”¶ï¼‰                      â”‚          â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚  â”‚  â”‚      MessagePollingService                     â”‚          â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ æ™ºèƒ½è½®è¯¢ï¼ˆæŒ‡æ•°é€€é¿ï¼š1sâ†’1.5sâ†’2.25s...â†’60sï¼‰    â”‚          â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ WebHookæ”¯æŒï¼ˆéƒ¨åˆ†å¹³å°ï¼‰                       â”‚          â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ è¶…æ—¶è‡ªåŠ¨å–æ¶ˆ+é€€æ¬¾                              â”‚          â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚  â”‚  â”‚      CostAnalyticsServiceï¼ˆæ–°å¢ï¼‰               â”‚          â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ å®æ—¶æˆæœ¬ç»Ÿè®¡                                  â”‚          â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ å¤šç»´åº¦æŠ¥è¡¨ç”Ÿæˆ                                â”‚          â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ æˆæœ¬é¢„æµ‹å’Œä¼˜åŒ–å»ºè®®                             â”‚          â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚  â”‚                                                                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚ â”‚
â”‚  â”‚  â”‚      BalanceMonitorServiceï¼ˆæ–°å¢ï¼‰              â”‚          â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ å®šæ—¶æ£€æŸ¥å¹³å°ä½™é¢ï¼ˆæ¯å°æ—¶ï¼‰                      â”‚          â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ ä½™é¢ä½äºé˜ˆå€¼è‡ªåŠ¨å‘Šè­¦                           â”‚          â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ æ”¯æŒå¤šç§å‘Šè­¦æ¸ é“                               â”‚          â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   Provider Adapters (3ä¸ªå¹³å°)                â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ SmsActivate     â”‚  â”‚   FiveSim       â”‚  â”‚  SmsPool    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   Adapter       â”‚  â”‚   Adapter       â”‚  â”‚  Adapter    â”‚ â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ getNumber()   â”‚  â”‚ â€¢ buyNumber()   â”‚  â”‚â€¢ purchase() â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ getStatus()   â”‚  â”‚ â€¢ checkSms()    â”‚  â”‚â€¢ check()    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ setStatus()   â”‚  â”‚ â€¢ finish()      â”‚  â”‚â€¢ finish()   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ getBalance()  â”‚  â”‚ â€¢ cancel()      â”‚  â”‚â€¢ cancel()   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ rentNumber()  â”‚  â”‚ â€¢ getBalance()  â”‚  â”‚â€¢ balance()  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   (24å°æ—¶)      â”‚  â”‚ â€¢ rentNumber()  â”‚  â”‚             â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                       Data Layer                              â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚  â”‚ PostgreSQL   â”‚  â”‚    Redis     â”‚  â”‚   RabbitMQ   â”‚      â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚  â”‚
â”‚  â”‚  â”‚â€¢ å·ç è®°å½•    â”‚  â”‚â€¢ å·ç æ± ç¼“å­˜  â”‚  â”‚â€¢ äº‹ä»¶é˜Ÿåˆ—    â”‚      â”‚  â”‚
â”‚  â”‚  â”‚â€¢ çŸ­ä¿¡è®°å½•    â”‚  â”‚â€¢ å¹³å°ä½™é¢    â”‚  â”‚â€¢ é€šçŸ¥é˜Ÿåˆ—    â”‚      â”‚  â”‚
â”‚  â”‚  â”‚â€¢ æˆæœ¬ç»Ÿè®¡    â”‚  â”‚â€¢ é™æµè®¡æ•°    â”‚  â”‚â€¢ å‘Šè­¦é˜Ÿåˆ—    â”‚      â”‚  â”‚
â”‚  â”‚  â”‚â€¢ ç§Ÿèµè®°å½•    â”‚  â”‚â€¢ çƒ­ç‚¹æœåŠ¡    â”‚  â”‚              â”‚      â”‚  â”‚
â”‚  â”‚  â”‚â€¢ å¹³å°é…ç½®    â”‚  â”‚  é¢„çƒ­        â”‚  â”‚              â”‚      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                     Event Bus (RabbitMQ)
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                       â–¼                       â–¼
   Device Service      Billing Service      Notification Service
  â€¢ WebSocketæ¨é€      â€¢ æˆæœ¬è®°å½•            â€¢ éªŒè¯ç é€šçŸ¥
  â€¢ éªŒè¯ç è‡ªåŠ¨å¡«å……     â€¢ è´¦å•ç”Ÿæˆ            â€¢ ä½™é¢å‘Šè­¦
  â€¢ çŠ¶æ€æ›´æ–°           â€¢ æˆæœ¬åˆ†æ            â€¢ å¹³å°æ•…éšœå‘Šè­¦
```

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡ï¼ˆå…¨åŠŸèƒ½ç‰ˆï¼‰

### æ–°å¢/æ‰©å±•è¡¨

```sql
-- =============================================
-- è¡¨1: è™šæ‹Ÿå·ç è®°å½•ï¼ˆæ‰©å±•ï¼‰
-- =============================================
CREATE TABLE virtual_numbers (
  -- ... åŸºç¡€å­—æ®µï¼ˆè§ä¹‹å‰æ–‡æ¡£ï¼‰...

  -- æ–°å¢ï¼šç§Ÿèµæ”¯æŒ
  rental_type VARCHAR(20) DEFAULT 'one_time',
    -- one_time: ä¸€æ¬¡æ€§ï¼ˆé»˜è®¤ï¼‰
    -- rental_24h: 24å°æ—¶ç§Ÿèµ
    -- rental_7d: 7å¤©ç§Ÿèµ

  rental_start TIMESTAMP,
  rental_end TIMESTAMP,
  rental_sms_count INT DEFAULT 0,              -- ç§ŸèµæœŸé—´æ”¶åˆ°çš„çŸ­ä¿¡æ•°

  -- æ–°å¢ï¼šå·ç æ± å…³è”
  from_pool BOOLEAN DEFAULT FALSE,             -- æ˜¯å¦æ¥è‡ªå·ç æ± 
  pool_id UUID REFERENCES number_pool(id),

  -- æ–°å¢ï¼šæ™ºèƒ½è·¯ç”±ä¿¡æ¯
  selected_by_algorithm VARCHAR(50),           -- å¹³å°é€‰æ‹©ç®—æ³•ï¼šcost, availability, success_rate
  fallback_count INT DEFAULT 0,                 -- é™çº§æ¬¡æ•°ï¼ˆä¸»â†’å¤‡ç”¨1â†’å¤‡ç”¨2ï¼‰

  -- ç´¢å¼•
  INDEX idx_rental_type (rental_type),
  INDEX idx_rental_end (rental_end),
  INDEX idx_from_pool (from_pool)
);

-- =============================================
-- è¡¨2: å·ç æ± ï¼ˆæ‰©å±•ï¼‰
-- =============================================
CREATE TABLE number_pool (
  -- ... åŸºç¡€å­—æ®µ ...

  -- æ–°å¢ï¼šé¢„çƒ­ç­–ç•¥
  preheated BOOLEAN DEFAULT FALSE,             -- æ˜¯å¦é¢„çƒ­å·ç 
  preheated_at TIMESTAMP,
  priority INT DEFAULT 0,                       -- ä¼˜å…ˆçº§ï¼ˆçƒ­é—¨æœåŠ¡ä¼˜å…ˆï¼‰

  -- æ–°å¢ï¼šä½¿ç”¨ç»Ÿè®¡
  reserved_count INT DEFAULT 0,                 -- è¢«é¢„ç•™æ¬¡æ•°
  used_count INT DEFAULT 0,                     -- å®é™…ä½¿ç”¨æ¬¡æ•°

  -- æ–°å¢ï¼šæˆæœ¬ä¼˜åŒ–
  bulk_purchased BOOLEAN DEFAULT FALSE,        -- æ˜¯å¦æ‰¹é‡è´­ä¹°
  discount_rate DECIMAL(5, 2) DEFAULT 0.00     -- æŠ˜æ‰£ç‡
);

-- =============================================
-- è¡¨3: å¹³å°é…ç½®ï¼ˆæ‰©å±•ï¼‰
-- =============================================
CREATE TABLE provider_configs (
  -- ... åŸºç¡€å­—æ®µ ...

  -- æ–°å¢ï¼šæ™ºèƒ½è·¯ç”±é…ç½®
  cost_weight DECIMAL(3, 2) DEFAULT 0.4,       -- æˆæœ¬æƒé‡
  speed_weight DECIMAL(3, 2) DEFAULT 0.3,      -- é€Ÿåº¦æƒé‡
  success_rate_weight DECIMAL(3, 2) DEFAULT 0.3, -- æˆåŠŸç‡æƒé‡

  -- æ–°å¢ï¼šå‘Šè­¦é…ç½®
  alert_enabled BOOLEAN DEFAULT TRUE,
  alert_channels JSONB,                         -- ["email", "sms", "dingtalk", "wechat"]
  alert_recipients JSONB,                       -- ["admin@example.com", "13800138000"]

  -- æ–°å¢ï¼šæ€§èƒ½æŒ‡æ ‡
  avg_sms_receive_time INT,                    -- å¹³å‡æ¥æ”¶æ—¶é—´ï¼ˆç§’ï¼‰
  p95_sms_receive_time INT,                    -- P95æ¥æ”¶æ—¶é—´
  last_success_rate DECIMAL(5, 2),             -- æœ€è¿‘æˆåŠŸç‡

  -- æ–°å¢ï¼šé™æµé…ç½®
  rate_limit_per_second INT DEFAULT 10,
  concurrent_requests_limit INT DEFAULT 50,

  -- æ–°å¢ï¼šWebHookæ”¯æŒ
  webhook_enabled BOOLEAN DEFAULT FALSE,
  webhook_url VARCHAR(255),
  webhook_secret VARCHAR(255)
);

-- =============================================
-- è¡¨4: æˆæœ¬ç»Ÿè®¡ï¼ˆæ‰©å±•ï¼‰
-- =============================================
CREATE TABLE sms_usage_stats (
  -- ... åŸºç¡€å­—æ®µ ...

  -- æ–°å¢ï¼šè¯¦ç»†ç»Ÿè®¡
  rental_count INT DEFAULT 0,                   -- ç§Ÿèµæ¬¡æ•°
  rental_cost DECIMAL(10, 2) DEFAULT 0.00,     -- ç§Ÿèµæˆæœ¬

  pool_hit_count INT DEFAULT 0,                 -- å·ç æ± å‘½ä¸­æ¬¡æ•°
  pool_miss_count INT DEFAULT 0,                -- å·ç æ± æœªå‘½ä¸­æ¬¡æ•°

  -- æ–°å¢ï¼šæ—¶é—´ç»Ÿè®¡
  avg_request_time INT,                         -- å¹³å‡è¯·æ±‚æ—¶é—´ï¼ˆmsï¼‰
  p50_receive_time INT,                         -- P50æ¥æ”¶æ—¶é—´ï¼ˆç§’ï¼‰
  p95_receive_time INT,                         -- P95æ¥æ”¶æ—¶é—´
  p99_receive_time INT,                         -- P99æ¥æ”¶æ—¶é—´

  -- æ–°å¢ï¼šé€€æ¬¾ç»Ÿè®¡
  refund_count INT DEFAULT 0,
  refund_amount DECIMAL(10, 2) DEFAULT 0.00
);

-- =============================================
-- è¡¨5: ç§Ÿèµå·ç è®°å½•ï¼ˆæ–°å¢ï¼‰
-- =============================================
CREATE TABLE rental_numbers (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),

  virtual_number_id UUID NOT NULL REFERENCES virtual_numbers(id),
  phone_number VARCHAR(20) NOT NULL,

  -- ç§Ÿèµä¿¡æ¯
  rental_duration VARCHAR(20) NOT NULL,        -- 24h, 7d, 30d
  rental_cost DECIMAL(10, 4) NOT NULL,
  started_at TIMESTAMP NOT NULL,
  expires_at TIMESTAMP NOT NULL,

  -- è®¾å¤‡ç»‘å®š
  device_id UUID NOT NULL,
  user_id UUID,

  -- ä½¿ç”¨ç»Ÿè®¡
  sms_received_count INT DEFAULT 0,            -- æ”¶åˆ°çŸ­ä¿¡æ•°
  sms_list JSONB,                               -- [{code, receivedAt, message}]

  -- çŠ¶æ€
  status VARCHAR(20) DEFAULT 'active',          -- active, expired, cancelled

  created_at TIMESTAMP DEFAULT NOW(),
  completed_at TIMESTAMP,

  INDEX idx_expires_at (expires_at),
  INDEX idx_device_id (device_id),
  INDEX idx_status (status)
);

-- =============================================
-- è¡¨6: å‘Šè­¦è®°å½•ï¼ˆæ–°å¢ï¼‰
-- =============================================
CREATE TABLE alert_logs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),

  -- å‘Šè­¦ç±»å‹
  alert_type VARCHAR(50) NOT NULL,
    -- low_balance: ä½™é¢ä¸è¶³
    -- provider_down: å¹³å°æ•…éšœ
    -- high_failure_rate: å¤±è´¥ç‡è¿‡é«˜
    -- cost_spike: æˆæœ¬çªå¢

  -- å‘Šè­¦å¯¹è±¡
  provider VARCHAR(50),
  threshold_value DECIMAL(10, 2),
  current_value DECIMAL(10, 2),

  -- å‘Šè­¦å†…å®¹
  alert_title VARCHAR(255) NOT NULL,
  alert_message TEXT,
  severity VARCHAR(20) DEFAULT 'warning',       -- info, warning, error, critical

  -- å‘Šè­¦å‘é€
  channels JSONB,                                -- ["email", "sms", "dingtalk"]
  recipients JSONB,
  sent_at TIMESTAMP DEFAULT NOW(),
  send_status VARCHAR(20) DEFAULT 'sent',        -- sent, failed

  -- å‘Šè­¦å¤„ç†
  acknowledged BOOLEAN DEFAULT FALSE,
  acknowledged_by UUID,
  acknowledged_at TIMESTAMP,

  created_at TIMESTAMP DEFAULT NOW(),

  INDEX idx_alert_type (alert_type),
  INDEX idx_created_at (created_at DESC),
  INDEX idx_acknowledged (acknowledged)
);

-- =============================================
-- è¡¨7: å·ç æ± ç­–ç•¥é…ç½®ï¼ˆæ–°å¢ï¼‰
-- =============================================
CREATE TABLE pool_strategies (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),

  -- é¢„çƒ­é…ç½®
  service_code VARCHAR(50) NOT NULL,
  country_code VARCHAR(5),
  provider VARCHAR(50),

  -- ç­–ç•¥å‚æ•°
  min_pool_size INT DEFAULT 5,                  -- æœ€å°æ± å¤§å°
  max_pool_size INT DEFAULT 20,                 -- æœ€å¤§æ± å¤§å°
  prefill_threshold DECIMAL(3, 2) DEFAULT 0.3,  -- è¡¥å……é˜ˆå€¼ï¼ˆ30%æ—¶è¡¥å……ï¼‰
  ttl_hours INT DEFAULT 2,                      -- å·ç TTLï¼ˆå°æ—¶ï¼‰

  -- æ—¶é—´é…ç½®
  active_hours JSONB,                            -- [9, 10, 11, ..., 17] æ´»è·ƒæ—¶æ®µ
  timezone VARCHAR(50) DEFAULT 'UTC',

  -- æˆæœ¬æ§åˆ¶
  max_daily_cost DECIMAL(10, 2),
  current_daily_cost DECIMAL(10, 2) DEFAULT 0.00,

  enabled BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),

  UNIQUE(service_code, country_code, provider)
);

-- =============================================
-- è§†å›¾: å¹³å°å¥åº·çŠ¶æ€ä»ªè¡¨æ¿ï¼ˆæ–°å¢ï¼‰
-- =============================================
CREATE VIEW provider_health_dashboard AS
SELECT
  pc.provider,
  pc.display_name,
  pc.enabled,
  pc.health_status,
  pc.balance,
  pc.balance_threshold,
  pc.priority,

  -- æˆåŠŸç‡ï¼ˆæœ€è¿‘24å°æ—¶ï¼‰
  ROUND(
    CAST(SUM(CASE WHEN vn.status = 'completed' THEN 1 ELSE 0 END) AS DECIMAL) /
    NULLIF(COUNT(*), 0) * 100,
    2
  ) as success_rate_24h,

  -- å¹³å‡æ¥æ”¶æ—¶é—´
  ROUND(
    AVG(EXTRACT(EPOCH FROM (vn.sms_received_at - vn.activated_at))),
    1
  ) as avg_receive_time_seconds,

  -- ä»Šæ—¥æˆæœ¬
  COALESCE(SUM(vn.cost), 0) as cost_today,

  -- ä»Šæ—¥è¯·æ±‚æ•°
  COUNT(*) as requests_today,

  -- å‘Šè­¦æ•°ï¼ˆæœªç¡®è®¤ï¼‰
  (SELECT COUNT(*)
   FROM alert_logs al
   WHERE al.provider = pc.provider
     AND al.acknowledged = FALSE
     AND al.created_at > NOW() - INTERVAL '24 hours'
  ) as unacknowledged_alerts

FROM provider_configs pc
LEFT JOIN virtual_numbers vn ON vn.provider = pc.provider
  AND vn.created_at > CURRENT_DATE
GROUP BY pc.provider, pc.display_name, pc.enabled, pc.health_status,
         pc.balance, pc.balance_threshold, pc.priority;

-- =============================================
-- å®šæ—¶ä»»åŠ¡å‡½æ•°
-- =============================================

-- 1. å·ç æ± è¡¥å……ï¼ˆæ¯10åˆ†é’Ÿæ‰§è¡Œï¼‰
CREATE OR REPLACE FUNCTION refill_number_pool()
RETURNS void AS $$
DECLARE
  strategy RECORD;
  current_count INT;
  needed_count INT;
BEGIN
  FOR strategy IN SELECT * FROM pool_strategies WHERE enabled = TRUE LOOP
    -- æ£€æŸ¥å½“å‰æ± å¤§å°
    SELECT COUNT(*) INTO current_count
    FROM number_pool
    WHERE service_code = strategy.service_code
      AND country_code = strategy.country_code
      AND status = 'available'
      AND expires_at > NOW();

    -- è®¡ç®—éœ€è¦è¡¥å……çš„æ•°é‡
    needed_count := strategy.min_pool_size - current_count;

    IF needed_count > 0 THEN
      -- è¿™é‡Œåº”è¯¥è°ƒç”¨åç«¯æœåŠ¡è¿›è¡Œå®é™…è´­ä¹°
      -- ç›®å‰åªè®°å½•æ—¥å¿—
      RAISE NOTICE 'Pool needs refill: service=%, country=%, needed=%',
        strategy.service_code, strategy.country_code, needed_count;
    END IF;
  END LOOP;
END;
$$ LANGUAGE plpgsql;

-- 2. æ¸…ç†è¿‡æœŸå·ç æ± ï¼ˆæ¯å°æ—¶æ‰§è¡Œï¼‰
CREATE OR REPLACE FUNCTION cleanup_expired_pool_numbers()
RETURNS void AS $$
BEGIN
  DELETE FROM number_pool
  WHERE status = 'available'
    AND expires_at < NOW();

  RAISE NOTICE 'Cleaned up % expired pool numbers', FOUND;
END;
$$ LANGUAGE plpgsql;

-- 3. æ£€æŸ¥ä½™é¢å¹¶å‘Šè­¦ï¼ˆæ¯å°æ—¶æ‰§è¡Œï¼‰
CREATE OR REPLACE FUNCTION check_balance_and_alert()
RETURNS void AS $$
DECLARE
  provider_rec RECORD;
BEGIN
  FOR provider_rec IN
    SELECT * FROM provider_configs
    WHERE enabled = TRUE
      AND balance < balance_threshold
      AND alert_enabled = TRUE
  LOOP
    -- æ£€æŸ¥æ˜¯å¦å·²ç»æœ‰æœªç¡®è®¤çš„å‘Šè­¦
    IF NOT EXISTS (
      SELECT 1 FROM alert_logs
      WHERE provider = provider_rec.provider
        AND alert_type = 'low_balance'
        AND acknowledged = FALSE
        AND created_at > NOW() - INTERVAL '1 hour'
    ) THEN
      -- åˆ›å»ºæ–°å‘Šè­¦
      INSERT INTO alert_logs (
        alert_type,
        provider,
        threshold_value,
        current_value,
        alert_title,
        alert_message,
        severity,
        channels,
        recipients
      ) VALUES (
        'low_balance',
        provider_rec.provider,
        provider_rec.balance_threshold,
        provider_rec.balance,
        format('[%s] ä½™é¢ä¸è¶³å‘Šè­¦', provider_rec.display_name),
        format('å¹³å° %s å½“å‰ä½™é¢ $%.2f ä½äºé˜ˆå€¼ $%.2fï¼Œè¯·åŠæ—¶å……å€¼ï¼',
          provider_rec.display_name, provider_rec.balance, provider_rec.balance_threshold),
        CASE
          WHEN provider_rec.balance < provider_rec.balance_threshold * 0.3 THEN 'critical'
          WHEN provider_rec.balance < provider_rec.balance_threshold * 0.5 THEN 'error'
          ELSE 'warning'
        END,
        provider_rec.alert_channels,
        provider_rec.alert_recipients
      );

      RAISE NOTICE 'Low balance alert created for %', provider_rec.provider;
    END IF;
  END LOOP;
END;
$$ LANGUAGE plpgsql;
```

---

## ğŸ“‹ APIæ‰©å±•ï¼ˆå…¨åŠŸèƒ½ç‰ˆï¼‰

### æ–°å¢APIç«¯ç‚¹

```typescript
/**
 * ==========================================
 * å·ç ç§ŸèµAPI
 * ==========================================
 */

/**
 * ç§Ÿèµè™šæ‹Ÿå·ç ï¼ˆ24å°æ—¶ï¼‰
 * POST /api/sms/numbers/rent
 */
interface RentNumberDto {
  service: string;
  country?: string;
  deviceId: string;
  duration: '24h' | '7d' | '30d';
  provider?: string;
}

interface RentNumberResponse {
  success: boolean;
  data: {
    rentalId: string;
    numberId: string;
    phoneNumber: string;
    provider: string;
    cost: number;
    startedAt: string;
    expiresAt: string;
    maxSmsCount: number;          // é¢„ä¼°å¯æ¥æ”¶çŸ­ä¿¡æ•°
  };
}

/**
 * è·å–ç§Ÿèµå·ç çš„æ‰€æœ‰çŸ­ä¿¡
 * GET /api/sms/rentals/:rentalId/messages
 */
interface GetRentalMessagesResponse {
  success: boolean;
  data: {
    rentalId: string;
    phoneNumber: string;
    messagesReceived: number;
    messages: Array<{
      id: string;
      code: string;
      messageText: string;
      receivedAt: string;
    }>;
  };
}

/**
 * ==========================================
 * å·ç æ± ç®¡ç†API
 * ==========================================
 */

/**
 * é…ç½®å·ç æ± ç­–ç•¥
 * POST /api/sms/pool/strategies
 */
interface CreatePoolStrategyDto {
  service: string;
  country?: string;
  provider?: string;
  minPoolSize: number;            // 5-50
  maxPoolSize: number;            // 10-100
  prefillThreshold: number;       // 0.2-0.5
  ttlHours: number;               // 1-24
  activeHours?: number[];         // [9,10,11,...,17]
  maxDailyCost?: number;
}

/**
 * æ‰‹åŠ¨é¢„çƒ­å·ç æ± 
 * POST /api/sms/pool/prefill
 */
interface PrefillPoolDto {
  service: string;
  country?: string;
  count: number;                   // é¢„è´­ä¹°æ•°é‡
  provider?: string;
}

/**
 * æŸ¥çœ‹å·ç æ± çŠ¶æ€
 * GET /api/sms/pool/status
 */
interface PoolStatusResponse {
  success: boolean;
  data: {
    strategies: Array<{
      service: string;
      country: string;
      provider: string;
      currentSize: number;
      targetSize: number;
      hitRate: number;              // å‘½ä¸­ç‡
      avgWaitTime: number;          // å¹³å‡ç­‰å¾…æ—¶é—´
    }>;
    summary: {
      totalPooled: number;
      totalAvailable: number;
      totalReserved: number;
      totalExpired: number;
    };
  };
}

/**
 * ==========================================
 * æˆæœ¬åˆ†æAPI
 * ==========================================
 */

/**
 * è·å–è¯¦ç»†æˆæœ¬æŠ¥è¡¨
 * GET /api/sms/analytics/cost?start=xxx&end=xxx&dimension=xxx
 */
interface GetCostAnalyticsQuery {
  start: string;                   // YYYY-MM-DD
  end: string;
  dimension?: 'provider' | 'service' | 'country' | 'day';
  provider?: string;
  service?: string;
}

interface GetCostAnalyticsResponse {
  success: boolean;
  data: {
    summary: {
      totalCost: number;
      totalRequests: number;
      avgCostPerRequest: number;
      successRate: number;
      refundAmount: number;
      netCost: number;              // æ€»æˆæœ¬ - é€€æ¬¾
    };
    breakdown: Array<{
      dimension: string;            // provider/service/country
      name: string;
      cost: number;
      requests: number;
      successCount: number;
      failureCount: number;
      successRate: number;
      avgCost: number;
    }>;
    trends: Array<{
      date: string;
      cost: number;
      requests: number;
      successRate: number;
    }>;
    optimization: {
      potentialSavings: number;
      recommendations: Array<{
        type: string;               // 'switch_country', 'use_pool', 'use_rental'
        description: string;
        estimatedSaving: number;
      }>;
    };
  };
}

/**
 * å¯¼å‡ºæˆæœ¬æŠ¥è¡¨
 * GET /api/sms/analytics/export?format=csv&start=xxx&end=xxx
 */
// è¿”å›CSV/Excelæ–‡ä»¶ä¸‹è½½

/**
 * ==========================================
 * å‘Šè­¦ç®¡ç†API
 * ==========================================
 */

/**
 * è·å–å‘Šè­¦åˆ—è¡¨
 * GET /api/sms/alerts?type=xxx&acknowledged=false
 */
interface ListAlertsQuery {
  type?: string;
  acknowledged?: boolean;
  severity?: string;
  page?: number;
  limit?: number;
}

/**
 * ç¡®è®¤å‘Šè­¦
 * POST /api/sms/alerts/:id/acknowledge
 */

/**
 * é…ç½®å‘Šè­¦è§„åˆ™
 * PUT /api/sms/providers/:provider/alert-config
 */
interface UpdateAlertConfigDto {
  enabled: boolean;
  balanceThreshold: number;
  channels: string[];              // ['email', 'sms', 'dingtalk', 'wechat']
  recipients: string[];            // ['admin@example.com', '13800138000']
  customRules?: Array<{
    metric: string;                // 'success_rate', 'avg_receive_time'
    operator: string;              // '<', '>', '=='
    threshold: number;
    severity: string;
  }>;
}

/**
 * ==========================================
 * æ€§èƒ½ç›‘æ§API
 * ==========================================
 */

/**
 * è·å–å®æ—¶æ€§èƒ½æŒ‡æ ‡
 * GET /api/sms/metrics/realtime
 */
interface RealtimeMetricsResponse {
  success: boolean;
  data: {
    providers: Array<{
      provider: string;
      qps: number;                  // æ¯ç§’è¯·æ±‚æ•°
      activePolling: number;        // æ´»è·ƒè½®è¯¢æ•°
      avgResponseTime: number;      // å¹³å‡å“åº”æ—¶é—´ï¼ˆmsï¼‰
      errorRate: number;            // é”™è¯¯ç‡
    }>;
    pool: {
      hitRate: number;              // å·ç æ± å‘½ä¸­ç‡
      avgPoolWaitTime: number;      // å¹³å‡æ± è·å–æ—¶é—´
    };
    system: {
      totalActiveNumbers: number;
      totalWaitingSms: number;
      totalReceivedToday: number;
    };
  };
}
```

---

## ğŸ’» æ ¸å¿ƒæœåŠ¡å®ç°ï¼ˆå…¨åŠŸèƒ½ç‰ˆå…³é”®ä»£ç ï¼‰

### æ™ºèƒ½å¹³å°é€‰æ‹©æœåŠ¡

```typescript
// backend/sms-receive-service/src/services/platform-selector.service.ts

import { Injectable, Logger } from '@nestjs/common';
import { InjectRepository } from '@nestjs/typeorm';
import { Repository } from 'typeorm';
import { ProviderConfig } from '../entities';

interface PlatformScore {
  provider: string;
  score: number;
  costScore: number;
  speedScore: number;
  successRateScore: number;
}

@Injectable()
export class PlatformSelectorService {
  private readonly logger = new Logger(PlatformSelectorService.name);

  constructor(
    @InjectRepository(ProviderConfig)
    private readonly providerRepo: Repository<ProviderConfig>
  ) {}

  /**
   * æ™ºèƒ½é€‰æ‹©æœ€ä½³å¹³å°
   * åŸºäºæˆæœ¬ã€é€Ÿåº¦ã€æˆåŠŸç‡ç»¼åˆè¯„åˆ†
   */
  async selectBestPlatform(
    service: string,
    country?: string
  ): Promise<string> {
    // 1. è·å–æ‰€æœ‰å¯ç”¨çš„å¹³å°
    const providers = await this.providerRepo.find({
      where: { enabled: true },
      order: { priority: 'ASC' }
    });

    if (providers.length === 0) {
      throw new Error('No available providers');
    }

    // 2. è®¡ç®—æ¯ä¸ªå¹³å°çš„å¾—åˆ†
    const scores: PlatformScore[] = [];

    for (const provider of providers) {
      // æ£€æŸ¥ä½™é¢
      if (provider.balance < provider.balanceThreshold) {
        this.logger.warn(`Provider ${provider.provider} balance too low`);
        continue;
      }

      // æ£€æŸ¥å¥åº·çŠ¶æ€
      if (provider.healthStatus === 'down') {
        this.logger.warn(`Provider ${provider.provider} is down`);
        continue;
      }

      // è·å–è¯¥æœåŠ¡çš„ä»·æ ¼ï¼ˆè¿™é‡Œç®€åŒ–ï¼Œå®é™…éœ€è°ƒç”¨å¹³å°APIï¼‰
      const cost = await this.getServiceCost(provider.provider, service, country);

      // è®¡ç®—å¾—åˆ†
      const costScore = this.calculateCostScore(cost);
      const speedScore = this.calculateSpeedScore(provider.avgSmsReceiveTime);
      const successRateScore = this.calculateSuccessRateScore(provider.lastSuccessRate);

      // åŠ æƒæ€»åˆ†
      const totalScore =
        costScore * provider.costWeight +
        speedScore * provider.speedWeight +
        successRateScore * provider.successRateWeight;

      scores.push({
        provider: provider.provider,
        score: totalScore,
        costScore,
        speedScore,
        successRateScore
      });
    }

    if (scores.length === 0) {
      throw new Error('No eligible providers available');
    }

    // 3. æŒ‰å¾—åˆ†æ’åºï¼Œè¿”å›æœ€é«˜åˆ†å¹³å°
    scores.sort((a, b) => b.score - a.score);

    this.logger.log(`Platform selection scores: ${JSON.stringify(scores)}`);

    return scores[0].provider;
  }

  /**
   * æˆæœ¬è¯„åˆ†ï¼ˆæˆæœ¬è¶Šä½åˆ†æ•°è¶Šé«˜ï¼‰
   * $0.05 -> 100åˆ†
   * $0.10 -> 80åˆ†
   * $0.50 -> 40åˆ†
   */
  private calculateCostScore(cost: number): number {
    if (cost <= 0) return 0;

    // åŸºå‡†ä»·æ ¼$0.10
    const baseCost = 0.10;
    const score = Math.max(0, 100 - (cost - baseCost) / baseCost * 100);

    return Math.min(100, score);
  }

  /**
   * é€Ÿåº¦è¯„åˆ†ï¼ˆæ¥æ”¶æ—¶é—´è¶ŠçŸ­åˆ†æ•°è¶Šé«˜ï¼‰
   * 10ç§’ -> 100åˆ†
   * 30ç§’ -> 70åˆ†
   * 60ç§’ -> 40åˆ†
   */
  private calculateSpeedScore(avgReceiveTime: number): number {
    if (!avgReceiveTime) return 70; // é»˜è®¤åˆ†æ•°

    if (avgReceiveTime <= 10) return 100;
    if (avgReceiveTime <= 30) return 70 + (30 - avgReceiveTime) / 20 * 30;
    if (avgReceiveTime <= 60) return 40 + (60 - avgReceiveTime) / 30 * 30;

    return Math.max(0, 40 - (avgReceiveTime - 60) / 60 * 40);
  }

  /**
   * æˆåŠŸç‡è¯„åˆ†
   * 95%+ -> 100åˆ†
   * 80-95% -> 60-100åˆ†çº¿æ€§
   * <80% -> <60åˆ†
   */
  private calculateSuccessRateScore(successRate: number): number {
    if (!successRate) return 70; // é»˜è®¤åˆ†æ•°

    if (successRate >= 95) return 100;
    if (successRate >= 80) return 60 + (successRate - 80) / 15 * 40;

    return Math.max(0, successRate / 80 * 60);
  }

  private async getServiceCost(
    provider: string,
    service: string,
    country?: string
  ): Promise<number> {
    // è¿™é‡Œåº”è¯¥è°ƒç”¨å¹³å°APIè·å–å®é™…ä»·æ ¼
    // ç°åœ¨è¿”å›ä¼°ç®—å€¼
    const defaultCosts = {
      'sms-activate': 0.10,
      '5sim': 0.08,
      'smspool': 0.15
    };

    return defaultCosts[provider] || 0.10;
  }
}
```

### å·ç æ± ç®¡ç†æœåŠ¡

```typescript
// backend/sms-receive-service/src/services/number-pool.service.ts

import { Injectable, Logger } from '@nestjs/common';
import { InjectRepository } from '@nestjs/typeorm';
import { Repository } from 'typeorm';
import { NumberPool, PoolStrategy } from '../entities';
import { Cron, CronExpression } from '@nestjs/schedule';

@Injectable()
export class NumberPoolService {
  private readonly logger = new Logger(NumberPoolService.name);

  constructor(
    @InjectRepository(NumberPool)
    private readonly poolRepo: Repository<NumberPool>,
    @InjectRepository(PoolStrategy)
    private readonly strategyRepo: Repository<PoolStrategy>
  ) {}

  /**
   * ä»å·ç æ± è·å–å·ç ï¼ˆä¼˜å…ˆä½¿ç”¨ï¼‰
   */
  async getFromPool(
    service: string,
    country?: string
  ): Promise<NumberPool | null> {
    const poolNumber = await this.poolRepo.findOne({
      where: {
        serviceCode: service,
        countryCode: country,
        status: 'available',
      },
      order: {
        priority: 'DESC',
        createdAt: 'ASC'
      }
    });

    if (poolNumber && poolNumber.expiresAt > new Date()) {
      // æ ‡è®°ä¸ºå·²é¢„ç•™
      poolNumber.status = 'reserved';
      poolNumber.reservedAt = new Date();
      poolNumber.reservedCount += 1;
      await this.poolRepo.save(poolNumber);

      this.logger.log(`Pool hit: ${poolNumber.phoneNumber} for ${service}`);

      return poolNumber;
    }

    this.logger.log(`Pool miss for ${service}/${country}`);
    return null;
  }

  /**
   * å®šæ—¶ä»»åŠ¡ï¼šè¡¥å……å·ç æ± 
   * æ¯10åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
   */
  @Cron(CronExpression.EVERY_10_MINUTES)
  async refillPools() {
    this.logger.log('Starting pool refill job...');

    const strategies = await this.strategyRepo.find({
      where: { enabled: true }
    });

    for (const strategy of strategies) {
      try {
        await this.refillPool(strategy);
      } catch (error) {
        this.logger.error(`Failed to refill pool for ${strategy.serviceCode}`, error);
      }
    }
  }

  private async refillPool(strategy: PoolStrategy) {
    // 1. æ£€æŸ¥å½“å‰æ± å¤§å°
    const currentCount = await this.poolRepo.count({
      where: {
        serviceCode: strategy.serviceCode,
        countryCode: strategy.countryCode,
        status: 'available'
      }
    });

    // 2. åˆ¤æ–­æ˜¯å¦éœ€è¦è¡¥å……
    const threshold = strategy.minPoolSize * strategy.prefillThreshold;

    if (currentCount > threshold) {
      this.logger.log(
        `Pool ${strategy.serviceCode}/${strategy.countryCode} is sufficient: ${currentCount}/${strategy.minPoolSize}`
      );
      return;
    }

    // 3. è®¡ç®—éœ€è¦è´­ä¹°çš„æ•°é‡
    const needed = strategy.minPoolSize - currentCount;

    // 4. æ£€æŸ¥ä»Šæ—¥æˆæœ¬æ˜¯å¦è¶…é™
    if (strategy.maxDailyCost &&
        strategy.currentDailyCost >= strategy.maxDailyCost) {
      this.logger.warn(
        `Pool ${strategy.serviceCode} daily cost limit reached: ${strategy.currentDailyCost}/${strategy.maxDailyCost}`
      );
      return;
    }

    // 5. æ‰¹é‡è´­ä¹°å·ç 
    this.logger.log(
      `Refilling pool ${strategy.serviceCode}/${strategy.countryCode}: buying ${needed} numbers`
    );

    // è¿™é‡Œåº”è¯¥è°ƒç”¨NumberManagementServiceæ‰¹é‡è´­ä¹°
    // ç°åœ¨åªæ˜¯ç¤ºæ„
    // await this.purchaseAndPoolNumbers(strategy, needed);
  }

  /**
   * å®šæ—¶ä»»åŠ¡ï¼šæ¸…ç†è¿‡æœŸå·ç 
   * æ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡
   */
  @Cron(CronExpression.EVERY_HOUR)
  async cleanupExpiredNumbers() {
    const result = await this.poolRepo
      .createQueryBuilder()
      .delete()
      .where('status = :status', { status: 'available' })
      .andWhere('expires_at < NOW()')
      .execute();

    this.logger.log(`Cleaned up ${result.affected} expired pool numbers`);
  }

  /**
   * è·å–å·ç æ± ç»Ÿè®¡
   */
  async getPoolStats() {
    const stats = await this.poolRepo
      .createQueryBuilder('pool')
      .select('service_code', 'service')
      .addSelect('country_code', 'country')
      .addSelect('provider', 'provider')
      .addSelect('COUNT(*)', 'total')
      .addSelect('SUM(CASE WHEN status = \'available\' THEN 1 ELSE 0 END)', 'available')
      .addSelect('SUM(CASE WHEN status = \'reserved\' THEN 1 ELSE 0 END)', 'reserved')
      .addSelect('SUM(used_count)', 'totalUsed')
      .addSelect('AVG(CASE WHEN used_count > 0 THEN 1.0 ELSE 0.0 END)', 'utilization')
      .groupBy('service_code, country_code, provider')
      .getRawMany();

    return stats;
  }
}
```

---

## ğŸ—“ï¸ 6å‘¨å¼€å‘æ—¶é—´çº¿

### Week 1: åŸºç¡€æ¶æ„ + SMS-Activate

**Day 1-2: é¡¹ç›®æ­å»º**
```bash
âœ… åˆ›å»º sms-receive-service å¾®æœåŠ¡
âœ… æ•°æ®åº“Schemaè®¾è®¡å’Œè¿ç§»
âœ… åŸºç¡€Entityå’ŒRepository
âœ… Moduleç»“æ„è®¾è®¡
âœ… é…ç½®ç®¡ç†ï¼ˆConfigModuleï¼‰
âœ… æ—¥å¿—å’Œç›‘æ§é›†æˆï¼ˆPino + Prometheusï¼‰
```

**Day 3-4: SMS-Activateé›†æˆ**
```bash
âœ… SmsActivateAdapterå®ç°
âœ… NumberManagementServiceåŸºç¡€ç‰ˆ
âœ… MessagePollingServiceåŸºç¡€ç‰ˆ
âœ… åŸºç¡€APIå®ç°ï¼ˆrequest, status, cancelï¼‰
âœ… å•å…ƒæµ‹è¯•
```

**Day 5: æµ‹è¯•å’Œä¼˜åŒ–**
```bash
âœ… é›†æˆæµ‹è¯•
âœ… çœŸå®ç¯å¢ƒæµ‹è¯•ï¼ˆTelegramæ³¨å†Œï¼‰
âœ… Bugä¿®å¤
âœ… æ–‡æ¡£ç¼–å†™
```

**Week 1äº¤ä»˜ç‰©**:
- âœ… SMS-Activateå®Œæ•´é›†æˆ
- âœ… å•å·ç è¯·æ±‚åŠŸèƒ½
- âœ… åŸºç¡€è½®è¯¢æœºåˆ¶
- âœ… æµ‹è¯•è¦†ç›–ç‡60%+

---

### Week 2: å¤šå¹³å°æ”¯æŒ + æ™ºèƒ½è·¯ç”±

**Day 6-7: 5simå’ŒSMSPoolé›†æˆ**
```bash
âœ… FiveSimAdapterå®ç°
âœ… SmsPoolAdapterå®ç°
âœ… é€‚é…å™¨å·¥å‚æ¨¡å¼
âœ… å¹³å°é…ç½®ç®¡ç†
```

**Day 8-9: æ™ºèƒ½è·¯ç”±**
```bash
âœ… PlatformSelectorServiceå®ç°
âœ… åŸºäºæˆæœ¬/é€Ÿåº¦/æˆåŠŸç‡çš„è¯„åˆ†ç®—æ³•
âœ… è‡ªåŠ¨é™çº§æœºåˆ¶ï¼ˆä¸»â†’å¤‡ç”¨1â†’å¤‡ç”¨2ï¼‰
âœ… å¹³å°å¥åº·æ£€æŸ¥
```

**Day 10: æ‰¹é‡æ“ä½œ**
```bash
âœ… æ‰¹é‡å·ç è¯·æ±‚API
âœ… å¹¶å‘æ§åˆ¶å’Œé™æµ
âœ… æ‰¹é‡æ“ä½œæµ‹è¯•
```

**Week 2äº¤ä»˜ç‰©**:
- âœ… 3å¹³å°å®Œæ•´é›†æˆ
- âœ… æ™ºèƒ½å¹³å°é€‰æ‹©
- âœ… æ‰¹é‡æ“ä½œæ”¯æŒ
- âœ… é™çº§å®¹é”™æœºåˆ¶

---

### Week 3: å·ç æ±  + æ™ºèƒ½è½®è¯¢

**Day 11-12: å·ç æ± **
```bash
âœ… NumberPoolServiceå®ç°
âœ… PoolStrategyé…ç½®
âœ… è‡ªåŠ¨è¡¥å……æœºåˆ¶ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰
âœ… å·ç æ± ä¼˜å…ˆçº§ç®¡ç†
```

**Day 13-14: æ™ºèƒ½è½®è¯¢ä¼˜åŒ–**
```bash
âœ… æŒ‡æ•°é€€é¿ç®—æ³•ï¼ˆ1sâ†’60sï¼‰
âœ… WebHookæ”¯æŒï¼ˆéƒ¨åˆ†å¹³å°ï¼‰
âœ… è½®è¯¢çŠ¶æ€ç®¡ç†
âœ… è‡ªåŠ¨å–æ¶ˆå’Œé€€æ¬¾
```

**Day 15: å·ç ç§Ÿèµ**
```bash
âœ… ç§Ÿèµå·ç API
âœ… 24å°æ—¶/7å¤©ç§Ÿèµæ”¯æŒ
âœ… å¤šçŸ­ä¿¡æ¥æ”¶å¤„ç†
```

**Week 3äº¤ä»˜ç‰©**:
- âœ… å·ç æ± ç³»ç»Ÿ
- âœ… æ™ºèƒ½è½®è¯¢ï¼ˆèŠ‚çœ30% APIè°ƒç”¨ï¼‰
- âœ… å·ç ç§ŸèµåŠŸèƒ½
- âœ… å“åº”é€Ÿåº¦æå‡75%

---

### Week 4: æˆæœ¬ç»Ÿè®¡ + å‘Šè­¦ç›‘æ§

**Day 16-17: æˆæœ¬åˆ†æ**
```bash
âœ… CostAnalyticsServiceå®ç°
âœ… å¤šç»´åº¦ç»Ÿè®¡ï¼ˆå¹³å°/æœåŠ¡/å›½å®¶/æ—¥æœŸï¼‰
âœ… æˆæœ¬è¶‹åŠ¿åˆ†æ
âœ… ä¼˜åŒ–å»ºè®®ç®—æ³•
```

**Day 18-19: å‘Šè­¦ç›‘æ§**
```bash
âœ… BalanceMonitorServiceå®ç°
âœ… ä½™é¢ç›‘æ§å’Œå‘Šè­¦
âœ… å¹³å°æ•…éšœæ£€æµ‹
âœ… å¤šæ¸ é“å‘Šè­¦ï¼ˆé‚®ä»¶/çŸ­ä¿¡/é’‰é’‰/ä¼ä¸šå¾®ä¿¡ï¼‰
```

**Day 20: Prometheusé›†æˆ**
```bash
âœ… è‡ªå®šä¹‰Metricsï¼ˆå·ç è¯·æ±‚ã€æ¥æ”¶æ—¶é—´ã€æˆåŠŸç‡ï¼‰
âœ… Grafana Dashboardè®¾è®¡
âœ… å‘Šè­¦è§„åˆ™é…ç½®
```

**Week 4äº¤ä»˜ç‰©**:
- âœ… å®Œæ•´æˆæœ¬åˆ†æç³»ç»Ÿ
- âœ… è‡ªåŠ¨å‘Šè­¦æœºåˆ¶
- âœ… Prometheus/Grafanaç›‘æ§
- âœ… æˆæœ¬ä¼˜åŒ–å»ºè®®

---

### Week 5: ç³»ç»Ÿé›†æˆ

**Day 21-22: åç«¯é›†æˆ**
```bash
âœ… Device Serviceé›†æˆï¼ˆWebSocketæ¨é€ï¼‰
âœ… Billing Serviceé›†æˆï¼ˆæˆæœ¬è®°å½•ï¼‰
âœ… Notification Serviceé›†æˆï¼ˆå‘Šè­¦é€šçŸ¥ï¼‰
âœ… API Gatewayè·¯ç”±é…ç½®
```

**Day 23-24: RabbitMQäº‹ä»¶**
```bash
âœ… å‘å¸ƒäº‹ä»¶ï¼ˆnumber.requested, code.received, number.expiredï¼‰
âœ… æ¶ˆè´¹è€…å®ç°ï¼ˆå„æœåŠ¡ï¼‰
âœ… DLXé…ç½®
âœ… äº‹ä»¶é‡è¯•æœºåˆ¶
```

**Day 25: é›†æˆæµ‹è¯•**
```bash
âœ… ç«¯åˆ°ç«¯æµ‹è¯•
âœ… æ€§èƒ½æµ‹è¯•ï¼ˆå¹¶å‘100ä¸ªè¯·æ±‚ï¼‰
âœ… æ•…éšœæ¢å¤æµ‹è¯•
```

**Week 5äº¤ä»˜ç‰©**:
- âœ… å®Œæ•´ç³»ç»Ÿé›†æˆ
- âœ… RabbitMQäº‹ä»¶é©±åŠ¨
- âœ… ç«¯åˆ°ç«¯åŠŸèƒ½éªŒè¯
- âœ… æ€§èƒ½åŸºå‡†æµ‹è¯•

---

### Week 6: å‰ç«¯å¼€å‘ + ä¸Šçº¿

**Day 26-27: Adminå‰ç«¯**
```bash
âœ… å¹³å°ç®¡ç†é¡µé¢ï¼ˆæŸ¥çœ‹çŠ¶æ€ã€ä½™é¢ã€é…ç½®ï¼‰
âœ… æˆæœ¬åˆ†æé¡µé¢ï¼ˆå›¾è¡¨ã€æŠ¥è¡¨ï¼‰
âœ… å‘Šè­¦ç®¡ç†é¡µé¢ï¼ˆæŸ¥çœ‹ã€ç¡®è®¤å‘Šè­¦ï¼‰
âœ… å·ç æ± ç®¡ç†é¡µé¢ï¼ˆç­–ç•¥é…ç½®ï¼‰
```

**Day 28-29: Userå‰ç«¯**
```bash
âœ… è™šæ‹Ÿå·ç è¯·æ±‚ç•Œé¢
âœ… éªŒè¯ç æ¥æ”¶æ˜¾ç¤º
âœ… ç§Ÿèµå·ç ç®¡ç†
âœ… æˆ‘çš„å·ç åˆ—è¡¨
```

**Day 30: æ–‡æ¡£ + éƒ¨ç½²**
```bash
âœ… APIæ–‡æ¡£ï¼ˆSwaggerï¼‰
âœ… éƒ¨ç½²æ–‡æ¡£
âœ… ä½¿ç”¨æ‰‹å†Œ
âœ… ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
âœ… ç›‘æ§é…ç½®
```

**Week 6äº¤ä»˜ç‰©**:
- âœ… å®Œæ•´å‰ç«¯ç•Œé¢ï¼ˆAdmin + Userï¼‰
- âœ… å®Œæ•´æ–‡æ¡£
- âœ… ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- âœ… é¡¹ç›®äº¤ä»˜

---

## ğŸ’° æˆæœ¬ä¼°ç®—ï¼ˆå…¨åŠŸèƒ½æ–¹æ¡ˆï¼‰

### å¼€å‘æˆæœ¬
```
å·¥ç¨‹å¸ˆæŠ•å…¥: 1ååç«¯ + 0.5åå‰ç«¯
æ—¶é—´: 6å‘¨ï¼ˆ42ä¸ªå·¥ä½œæ—¥ï¼‰

åç«¯å¼€å‘: 6å‘¨ Ã— 5å¤© = 30å¤©
å‰ç«¯å¼€å‘: 2å‘¨ Ã— 5å¤© = 10å¤©ï¼ˆä¸åç«¯å¹¶è¡Œï¼‰
æµ‹è¯•é›†æˆ: è´¯ç©¿å…¨ç¨‹
```

### è¿è¥æˆæœ¬ï¼ˆæœˆåº¦ï¼Œ1000æ¬¡/å¤©ï¼‰

| é¡¹ç›® | åŸºç¡€æ–¹æ¡ˆ | å…¨åŠŸèƒ½æ–¹æ¡ˆ | èŠ‚çœ |
|------|---------|-----------|------|
| **å¹³å°ä½¿ç”¨è´¹** | $3,690 | $2,500 | **32%** |
| - é€‰æ‹©ä½ä»·å›½å®¶ | - | -$600 | |
| - ä½¿ç”¨å·ç æ±  | - | -$400 | |
| - æ™ºèƒ½é€€æ¬¾ | - | -$190 | |
| **æœåŠ¡å™¨æˆæœ¬** | $50 | $80 | - |
| - SMS Service | +$30 | +$50 | |
| - Redisæ‰©å®¹ | +$10 | +$15 | |
| - PostgreSQLæ‰©å®¹ | +$10 | +$15 | |
| **ç›‘æ§å‘Šè­¦** | $0 | $20 | - |
| - Grafana Cloud | - | $20 | |
| **æ€»è®¡** | $3,740 | $2,600 | **30%** |

**ROIåˆ†æ**:
```
é¢å¤–å¼€å‘æˆæœ¬: 2å‘¨å·¥ç¨‹å¸ˆæ—¶é—´
æœˆåº¦èŠ‚çœ: $1,140
å›æœ¬å‘¨æœŸ: 1-2ä¸ªæœˆ

é•¿æœŸæ”¶ç›Šï¼ˆ12ä¸ªæœˆï¼‰:
- èŠ‚çœæˆæœ¬: $13,680
- æå‡å¯ç”¨æ€§: 95% â†’ 99.9%
- å‡å°‘äººå·¥å¹²é¢„: æ¯æœˆèŠ‚çœ10å°æ—¶è¿ç»´æ—¶é—´
```

---

## ğŸ¯ ä¼˜å…ˆçº§å»ºè®®

å¦‚æœæ—¶é—´æˆ–èµ„æºæœ‰é™ï¼Œå»ºè®®æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§å®æ–½ï¼š

### P0ï¼ˆå¿…é¡»ï¼ŒWeek 1-2ï¼‰
- âœ… SMS-Activateé›†æˆ
- âœ… å•å·ç è¯·æ±‚
- âœ… åŸºç¡€è½®è¯¢
- âœ… Device Serviceé›†æˆ

### P1ï¼ˆé‡è¦ï¼ŒWeek 3-4ï¼‰
- âœ… 5simå¤‡ç”¨å¹³å°
- âœ… æ™ºèƒ½å¹³å°åˆ‡æ¢
- âœ… æ‰¹é‡æ“ä½œ
- âœ… å·ç æ± ï¼ˆæ€§èƒ½æå‡75%ï¼‰

### P2ï¼ˆå¢å¼ºï¼ŒWeek 4-5ï¼‰
- âœ… æ™ºèƒ½è½®è¯¢ä¼˜åŒ–ï¼ˆèŠ‚çœ30%æˆæœ¬ï¼‰
- âœ… æˆæœ¬ç»Ÿè®¡
- âœ… ä½™é¢å‘Šè­¦
- âœ… Billingé›†æˆ

### P3ï¼ˆå¯é€‰ï¼ŒWeek 6ï¼‰
- âœ… SMSPoolé›†æˆï¼ˆé«˜é£é™©å¹³å°ï¼‰
- âœ… å·ç ç§Ÿèµ
- âœ… å‰ç«¯UI
- âœ… é«˜çº§æŠ¥è¡¨

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ä»Šå¤©ï¼ˆç«‹å³ï¼‰
- [ ] æ³¨å†Œ SMS-Activateã€5simã€SMSPool è´¦å·
- [ ] å„å……å€¼ $10 æµ‹è¯•
- [ ] è¿è¡Œ Quick Start æµ‹è¯•è„šæœ¬
- [ ] ç¡®è®¤æµ‹è¯•ç»“æœï¼ŒéªŒè¯å¯è¡Œæ€§

### æœ¬å‘¨
- [ ] åˆ›å»º `backend/sms-receive-service` é¡¹ç›®
- [ ] å®æ–½ Week 1 å¼€å‘è®¡åˆ’
- [ ] å®Œæˆ SMS-Activate é›†æˆ
- [ ] ç¬¬ä¸€ä¸ªçœŸå®åœºæ™¯æµ‹è¯•ï¼ˆäº‘æ‰‹æœºTelegramæ³¨å†Œï¼‰

### ç¬¬2å‘¨
- [ ] é›†æˆ 5sim å’Œ SMSPool
- [ ] å®ç°æ™ºèƒ½è·¯ç”±
- [ ] æ‰¹é‡æ“ä½œæµ‹è¯•

### ç¬¬3-6å‘¨
- [ ] æŒ‰å‘¨è®¡åˆ’é€æ­¥å®æ–½
- [ ] æ¯å‘¨äº”è¿›è¡Œæ¼”ç¤ºå’Œå›é¡¾
- [ ] æœ€åä¸€å‘¨å®Œæˆæ–‡æ¡£å’Œéƒ¨ç½²

---

## ğŸ‰ é¢„æœŸæˆæœ

å®Œæˆ6å‘¨å¼€å‘åï¼Œä½ å°†æ‹¥æœ‰ï¼š

âœ… **ä¼ä¸šçº§éªŒè¯ç æ¥æ”¶ç³»ç»Ÿ**
- 3å¹³å°å†—ä½™ï¼ˆ99.9%å¯ç”¨æ€§ï¼‰
- æ”¯æŒ180+å›½å®¶ï¼Œ5000+åº”ç”¨
- è‡ªåŠ¨åŒ–ç¨‹åº¦95%+

âœ… **æˆæœ¬ä¼˜åŒ–ç³»ç»Ÿ**
- è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜å¹³å°ï¼ˆèŠ‚çœ32%ï¼‰
- å·ç æ± é¢„çƒ­ï¼ˆå“åº”æå‡75%ï¼‰
- æ™ºèƒ½é€€æ¬¾ï¼ˆèŠ‚çœ20-30%ï¼‰

âœ… **å®Œæ•´ç›‘æ§å‘Šè­¦**
- å®æ—¶æˆæœ¬ç»Ÿè®¡
- å¤šç»´åº¦æŠ¥è¡¨åˆ†æ
- è‡ªåŠ¨ä½™é¢å‘Šè­¦

âœ… **å¼€å‘è€…å‹å¥½**
- RESTful API
- å®Œæ•´æ–‡æ¡£
- Swaggerç•Œé¢
- Adminç®¡ç†åå°

âœ… **ç”Ÿäº§å°±ç»ª**
- é«˜å¯ç”¨æ¶æ„
- å®Œæ•´æµ‹è¯•è¦†ç›–
- Prometheusç›‘æ§
- ç¾å¤‡æ¢å¤

---

**å‡†å¤‡å¥½å¼€å§‹äº†å—ï¼Ÿ** ğŸš€

è®©æˆ‘çŸ¥é“ä½ éœ€è¦æˆ‘å¸®ä½ ï¼š
1. åˆ›å»ºé¡¹ç›®åˆå§‹ä»£ç æ¡†æ¶
2. è®¾ç½®å¼€å‘ç¯å¢ƒ
3. ç¼–å†™ç¬¬ä¸€ä¸ªé€‚é…å™¨
4. å…¶ä»–ä»»ä½•å¸®åŠ©
